"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./node_modules/typeit-react/dist/index.es.js":
/*!****************************************************!*\
  !*** ./node_modules/typeit-react/dist/index.es.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ TypeIt; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nvar __defProp = Object.defineProperty;\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _TypeIt_instances, empty_fn, fire_fn, move_fn, prepLoop_fn, fireItemWithContext_fn, wait_fn, attachCursor_fn, elementIsInput_fn, queueAndReturn_fn, maybeAppendPause_fn, generateTemporaryOptionQueueItems_fn, updateOptions_fn, generateQueue_fn, _buildOptions, prependHardcodedStrings_fn, setUpCursor_fn, addSplitPause_fn, type_fn, delete_fn, removeNode_fn, getPace_fn, derivedCursorPosition_get, isInput_get, shouldRenderCursor_get, allChars_get, _a;\n\nconst isArray = (thing) => Array.isArray(thing);\nconst asArray = (value) => isArray(value) ? value : [value];\nlet Queue = function(initialItems) {\n  let add = function(steps) {\n    asArray(steps).forEach((step) => {\n      var _a2;\n      return _q.set(Symbol((_a2 = step.char) == null ? void 0 : _a2.innerText), buildQueueItem({ ...step }));\n    });\n    return this;\n  };\n  let getTypeable = () => rawValues().filter((value) => value.typeable);\n  let set = function(index, item) {\n    let keys = [..._q.keys()];\n    _q.set(keys[index], buildQueueItem(item));\n  };\n  let buildQueueItem = (queueItem) => {\n    queueItem.shouldPauseCursor = function() {\n      return Boolean(this.typeable || this.cursorable || this.deletable);\n    };\n    return queueItem;\n  };\n  let reset = function() {\n    _q.forEach((item) => delete item.done);\n  };\n  let wipe = function() {\n    _q = /* @__PURE__ */ new Map();\n    add(initialItems);\n  };\n  let getQueue = () => _q;\n  let rawValues = () => Array.from(_q.values());\n  let destroy = (key) => _q.delete(key);\n  let getItems = (all = false) => all ? rawValues() : rawValues().filter((i) => !i.done);\n  let done = (key, shouldDestroy = false) => shouldDestroy ? _q.delete(key) : _q.get(key).done = true;\n  let _q = /* @__PURE__ */ new Map();\n  add(initialItems);\n  return {\n    add,\n    set,\n    wipe,\n    done,\n    reset,\n    destroy,\n    getItems,\n    getQueue,\n    getTypeable\n  };\n};\nconst DATA_ATTRIBUTE = \"data-typeit-id\";\nconst CURSOR_CLASS = \"ti-cursor\";\nconst END = \"END\";\nconst DEFAULT_STATUSES = {\n  started: false,\n  completed: false,\n  frozen: false,\n  destroyed: false\n};\nconst DEFAULT_OPTIONS = {\n  breakLines: true,\n  cursor: {\n    autoPause: true,\n    autoPauseDelay: 500,\n    animation: {\n      frames: [0, 0, 1].map((n) => {\n        return { opacity: n };\n      }),\n      options: {\n        iterations: Infinity,\n        easing: \"steps(2, start)\",\n        fill: \"forwards\"\n      }\n    }\n  },\n  cursorChar: \"|\",\n  cursorSpeed: 1e3,\n  deleteSpeed: null,\n  html: true,\n  lifeLike: true,\n  loop: false,\n  loopDelay: 750,\n  nextStringDelay: 750,\n  speed: 100,\n  startDelay: 250,\n  startDelete: false,\n  strings: [],\n  waitUntilVisible: false,\n  beforeString: () => {\n  },\n  afterString: () => {\n  },\n  beforeStep: () => {\n  },\n  afterStep: () => {\n  },\n  afterComplete: () => {\n  }\n};\nconst PLACEHOLDER_CSS = `[${DATA_ATTRIBUTE}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`;\nconst createElement = (el) => document.createElement(el);\nconst createTextNode = (content) => document.createTextNode(content);\nconst appendStyleBlock = (styles, id = \"\") => {\n  let styleBlock = createElement(\"style\");\n  styleBlock.id = id;\n  styleBlock.appendChild(createTextNode(styles));\n  document.head.appendChild(styleBlock);\n};\nconst calculateDelay = (delayArg) => {\n  if (!isArray(delayArg)) {\n    delayArg = [delayArg / 2, delayArg / 2];\n  }\n  return delayArg;\n};\nconst randomInRange = (value, range2) => {\n  return Math.abs(\n    Math.random() * (value + range2 - (value - range2)) + (value - range2)\n  );\n};\nlet range = (val) => val / 2;\nfunction calculatePace(options) {\n  let { speed, deleteSpeed, lifeLike } = options;\n  deleteSpeed = deleteSpeed !== null ? deleteSpeed : speed / 3;\n  return lifeLike ? [\n    randomInRange(speed, range(speed)),\n    randomInRange(deleteSpeed, range(deleteSpeed))\n  ] : [speed, deleteSpeed];\n}\nconst toArray = (val) => Array.from(val);\nlet expandTextNodes = (element) => {\n  [...element.childNodes].forEach((child) => {\n    if (child.nodeValue) {\n      [...child.nodeValue].forEach((c) => {\n        child.parentNode.insertBefore(createTextNode(c), child);\n      });\n      child.remove();\n      return;\n    }\n    expandTextNodes(child);\n  });\n  return element;\n};\nconst getParsedBody = (content) => {\n  let doc = document.implementation.createHTMLDocument();\n  doc.body.innerHTML = content;\n  return expandTextNodes(doc.body);\n};\nfunction walkElementNodes(element, shouldReverse = false, shouldIncludeCursor = false) {\n  let cursor = element.querySelector(`.${CURSOR_CLASS}`);\n  let walker = document.createTreeWalker(element, NodeFilter.SHOW_ALL, {\n    acceptNode: (node) => {\n      var _a2, _b;\n      if (cursor && shouldIncludeCursor) {\n        if ((_a2 = node.classList) == null ? void 0 : _a2.contains(CURSOR_CLASS)) {\n          return NodeFilter.FILTER_ACCEPT;\n        }\n        if (cursor.contains(node)) {\n          return NodeFilter.FILTER_REJECT;\n        }\n      }\n      return ((_b = node.classList) == null ? void 0 : _b.contains(CURSOR_CLASS)) ? NodeFilter.FILTER_REJECT : NodeFilter.FILTER_ACCEPT;\n    }\n  });\n  let nextNode;\n  let nodes = [];\n  while (nextNode = walker.nextNode()) {\n    if (!nextNode.originalParent) {\n      nextNode.originalParent = nextNode.parentNode;\n    }\n    nodes.push(nextNode);\n  }\n  return shouldReverse ? nodes.reverse() : nodes;\n}\nfunction chunkStringAsHtml(string) {\n  return walkElementNodes(getParsedBody(string));\n}\nfunction maybeChunkStringAsHtml(str, asHtml = true) {\n  return asHtml ? chunkStringAsHtml(str) : toArray(str).map(createTextNode);\n}\nconst cleanUpSkipped = ({\n  index,\n  newIndex,\n  queueItems,\n  cleanUp\n}) => {\n  for (let i = index + 1; i < newIndex + 1; i++) {\n    cleanUp(queueItems[i][0]);\n  }\n};\nconst isNumber = (value) => Number.isInteger(value);\nconst countStepsToSelector = ({\n  queueItems,\n  selector,\n  cursorPosition,\n  to\n}) => {\n  if (isNumber(selector)) {\n    return selector * -1;\n  }\n  let isMovingToEnd = new RegExp(END, \"i\").test(to);\n  let selectorIndex = selector ? [...queueItems].reverse().findIndex(({ char }) => {\n    let parentElement = char.parentElement;\n    let parentMatches = parentElement.matches(selector);\n    if (isMovingToEnd && parentMatches) {\n      return true;\n    }\n    return parentMatches && parentElement.firstChild.isSameNode(char);\n  }) : -1;\n  if (selectorIndex < 0) {\n    selectorIndex = isMovingToEnd ? 0 : queueItems.length - 1;\n  }\n  let offset = isMovingToEnd ? 0 : 1;\n  return selectorIndex - cursorPosition + offset;\n};\nconst destroyTimeouts = (timeouts) => {\n  timeouts.forEach(clearTimeout);\n  return [];\n};\nconst duplicate = (value, times) => new Array(times).fill(value);\nlet beforePaint = (cb) => {\n  return new Promise((resolve) => {\n    requestAnimationFrame(async () => {\n      resolve(await cb());\n    });\n  });\n};\nlet getAnimationFromElement = (element) => {\n  return element == null ? void 0 : element.getAnimations().find((animation) => {\n    return animation.id === element.dataset.tiAnimationId;\n  });\n};\nlet setCursorAnimation = ({\n  cursor,\n  frames,\n  options\n}) => {\n  let animation = cursor.animate(frames, options);\n  animation.pause();\n  animation.id = cursor.dataset.tiAnimationId;\n  beforePaint(() => {\n    beforePaint(() => {\n      animation.play();\n    });\n  });\n  return animation;\n};\nlet rebuildCursorAnimation = ({\n  cursor,\n  options,\n  cursorOptions\n}) => {\n  if (!cursor || !cursorOptions) return;\n  let animation = getAnimationFromElement(cursor);\n  let oldCurrentTime;\n  if (animation) {\n    options.delay = animation.effect.getComputedTiming().delay;\n    oldCurrentTime = animation.currentTime;\n    animation.cancel();\n  }\n  let newAnimation = setCursorAnimation({\n    cursor,\n    frames: cursorOptions.animation.frames,\n    options\n  });\n  if (oldCurrentTime) {\n    newAnimation.currentTime = oldCurrentTime;\n  }\n  return newAnimation;\n};\nlet execute = (queueItem) => {\n  var _a2;\n  return (_a2 = queueItem.func) == null ? void 0 : _a2.call(null);\n};\nlet fireItem = async ({\n  index,\n  queueItems,\n  wait: wait2,\n  cursor,\n  cursorOptions\n}) => {\n  let queueItem = queueItems[index][1];\n  let instantQueue = [];\n  let tempIndex = index;\n  let futureItem = queueItem;\n  let shouldBeGrouped = () => futureItem && !futureItem.delay;\n  let shouldPauseCursor = queueItem.shouldPauseCursor() && cursorOptions.autoPause;\n  while (shouldBeGrouped()) {\n    instantQueue.push(futureItem);\n    shouldBeGrouped() && tempIndex++;\n    futureItem = queueItems[tempIndex] ? queueItems[tempIndex][1] : null;\n  }\n  if (instantQueue.length) {\n    await beforePaint(async () => {\n      for (let q of instantQueue) {\n        await execute(q);\n      }\n    });\n    return tempIndex - 1;\n  }\n  let animation = getAnimationFromElement(cursor);\n  let options;\n  if (animation) {\n    options = {\n      ...animation.effect.getComputedTiming(),\n      delay: shouldPauseCursor ? cursorOptions.autoPauseDelay : 0\n    };\n  }\n  await wait2(async () => {\n    if (animation && shouldPauseCursor) {\n      animation.cancel();\n    }\n    await beforePaint(() => {\n      execute(queueItem);\n    });\n  }, queueItem.delay);\n  await rebuildCursorAnimation({\n    cursor,\n    options,\n    cursorOptions\n  });\n  return index;\n};\nconst fireWhenVisible = (element, func) => {\n  let observer = new IntersectionObserver(\n    (entries, observer2) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          func();\n          observer2.unobserve(element);\n        }\n      });\n    },\n    { threshold: 1 }\n  );\n  observer.observe(element);\n};\nconst generateHash = () => Math.random().toString().substring(2, 9);\nconst isInput = (el) => {\n  return \"value\" in el;\n};\nlet getAllChars = (element) => {\n  if (isInput(element)) {\n    return toArray(element.value);\n  }\n  return walkElementNodes(element, true).filter(\n    (c) => !(c.childNodes.length > 0)\n  );\n};\nlet handleFunctionalArg = (arg) => {\n  return typeof arg === \"function\" ? arg() : arg;\n};\nlet select = (selector, element = document, all = false) => {\n  return element[`querySelector${all ? \"All\" : \"\"}`](selector);\n};\nlet isBodyElement = (node) => /body/i.test(node == null ? void 0 : node.tagName);\nlet insertIntoElement = (originalTarget, character) => {\n  if (isInput(originalTarget)) {\n    originalTarget.value = `${originalTarget.value}${character.textContent}`;\n    return;\n  }\n  character.innerHTML = \"\";\n  let target = isBodyElement(character.originalParent) ? originalTarget : (\n    // If we add one-off fresh elements, there will be no\n    // \"originalParent\", so always fall back to the default target.\n    character.originalParent || originalTarget\n  );\n  target.insertBefore(\n    character,\n    select(\".\" + CURSOR_CLASS, target) || null\n  );\n};\nconst isNonVoidElement = (el) => /<(.+)>(.*?)<\\/(.+)>/.test(el.outerHTML);\nconst merge = (originalObj, newObj) => Object.assign({}, originalObj, newObj);\nlet processCursorOptions = (cursorOptions) => {\n  var _a2, _b;\n  if (typeof cursorOptions === \"object\") {\n    let newOptions = {};\n    let { frames: defaultFrames, options: defaultOptions } = DEFAULT_OPTIONS.cursor.animation;\n    newOptions.animation = cursorOptions.animation || {};\n    newOptions.animation.frames = ((_a2 = cursorOptions.animation) == null ? void 0 : _a2.frames) || defaultFrames;\n    newOptions.animation.options = merge(\n      defaultOptions,\n      ((_b = cursorOptions.animation) == null ? void 0 : _b.options) || {}\n    );\n    newOptions.autoPause = cursorOptions.autoPause ?? DEFAULT_OPTIONS.cursor.autoPause;\n    newOptions.autoPauseDelay = cursorOptions.autoPauseDelay || DEFAULT_OPTIONS.cursor.autoPauseDelay;\n    return newOptions;\n  }\n  if (cursorOptions === true) {\n    return DEFAULT_OPTIONS.cursor;\n  }\n  return cursorOptions;\n};\nconst removeNode = (node, rootElement) => {\n  if (!node) return;\n  let nodeParent = node.parentNode;\n  let nodeToRemove = nodeParent.childNodes.length > 1 || nodeParent.isSameNode(rootElement) ? (\n    // This parent still needs to exist.\n    node\n  ) : (\n    // There's nothing else in there, so just delete the entire thing.\n    // By doing this, we clean up markup as we go along.\n    nodeParent\n  );\n  nodeToRemove.remove();\n};\nconst repositionCursor = (element, allChars, newCursorPosition) => {\n  let nodeToInsertBefore = allChars[newCursorPosition - 1];\n  let cursor = select(`.${CURSOR_CLASS}`, element);\n  element = (nodeToInsertBefore == null ? void 0 : nodeToInsertBefore.parentNode) || element;\n  element.insertBefore(cursor, nodeToInsertBefore || null);\n};\nfunction selectorToElement(thing) {\n  return typeof thing === \"string\" ? select(thing) : thing;\n}\nlet cursorFontStyles = {\n  \"font-family\": \"\",\n  \"font-weight\": \"\",\n  \"font-size\": \"\",\n  \"font-style\": \"\",\n  \"line-height\": \"\",\n  color: \"\",\n  transform: \"translateX(-.125em)\"\n};\nlet setCursorStyles = (id, element) => {\n  let rootSelector = `[${DATA_ATTRIBUTE}='${id}']`;\n  let cursorSelector = `${rootSelector} .${CURSOR_CLASS}`;\n  let computedStyles = getComputedStyle(element);\n  let customProperties = Object.entries(cursorFontStyles).reduce(\n    (accumulator, [item, value]) => {\n      return `${accumulator} ${item}: var(--ti-cursor-${item}, ${value || computedStyles[item]});`;\n    },\n    \"\"\n  );\n  appendStyleBlock(\n    `${cursorSelector} { display: inline-block; width: 0; ${customProperties} }`,\n    id\n  );\n};\nfunction splitOnBreak(str) {\n  return str.replace(/<!--(.+?)-->/g, \"\").trim().split(/<br(?:\\s*?)(?:\\/)?>/);\n}\nlet updateCursorPosition = (steps, cursorPosition, printedCharacters) => {\n  return Math.min(\n    Math.max(cursorPosition + steps, 0),\n    printedCharacters.length\n  );\n};\nlet wait = (callback, delay, timeouts) => {\n  return new Promise((resolve) => {\n    let cb = async () => {\n      await callback();\n      resolve();\n    };\n    timeouts.push(setTimeout(cb, delay || 0));\n  });\n};\nlet TypeIt$1 = (_a = class {\n  constructor(element, options = {}) {\n    __privateAdd(this, _TypeIt_instances);\n    __publicField(this, \"element\");\n    __publicField(this, \"timeouts\");\n    __publicField(this, \"cursorPosition\");\n    __publicField(this, \"predictedCursorPosition\");\n    __publicField(this, \"statuses\", {\n      started: false,\n      completed: false,\n      frozen: false,\n      destroyed: false\n    });\n    __publicField(this, \"opts\");\n    __publicField(this, \"id\");\n    __publicField(this, \"queue\");\n    __publicField(this, \"cursor\");\n    __publicField(this, \"unfreeze\", () => {\n    });\n    __publicField(this, \"is\", function(key) {\n      return this.statuses[key];\n    });\n    __privateAdd(this, _buildOptions, (options) => {\n      options.cursor = processCursorOptions(\n        options.cursor ?? DEFAULT_OPTIONS.cursor\n      );\n      this.opts.strings = __privateMethod(this, _TypeIt_instances, prependHardcodedStrings_fn).call(this, asArray(this.opts.strings));\n      this.opts = merge(this.opts, {\n        html: !__privateGet(this, _TypeIt_instances, isInput_get) && this.opts.html,\n        nextStringDelay: calculateDelay(this.opts.nextStringDelay),\n        loopDelay: calculateDelay(this.opts.loopDelay)\n      });\n    });\n    this.opts = merge(DEFAULT_OPTIONS, options);\n    this.element = selectorToElement(element);\n    this.timeouts = [];\n    this.cursorPosition = 0;\n    this.unfreeze = () => {\n    };\n    this.predictedCursorPosition = null;\n    this.statuses = merge({}, DEFAULT_STATUSES);\n    this.id = generateHash();\n    this.queue = Queue([{ delay: this.opts.startDelay }]);\n    __privateGet(this, _buildOptions).call(this, options);\n    this.cursor = __privateMethod(this, _TypeIt_instances, setUpCursor_fn).call(this);\n    this.element.dataset.typeitId = this.id;\n    appendStyleBlock(PLACEHOLDER_CSS);\n    if (this.opts.strings.length) {\n      __privateMethod(this, _TypeIt_instances, generateQueue_fn).call(this);\n    }\n  }\n  /**\n   * Can only be called once.\n   */\n  go() {\n    if (this.statuses.started) {\n      return this;\n    }\n    __privateMethod(this, _TypeIt_instances, attachCursor_fn).call(this);\n    if (!this.opts.waitUntilVisible) {\n      __privateMethod(this, _TypeIt_instances, fire_fn).call(this);\n      return this;\n    }\n    fireWhenVisible(this.element, __privateMethod(this, _TypeIt_instances, fire_fn).bind(this));\n    return this;\n  }\n  destroy(shouldRemoveCursor = true) {\n    this.timeouts = destroyTimeouts(this.timeouts);\n    handleFunctionalArg(shouldRemoveCursor) && this.cursor && __privateMethod(this, _TypeIt_instances, removeNode_fn).call(this, this.cursor);\n    this.statuses.destroyed = true;\n  }\n  reset(rebuild) {\n    !this.is(\"destroyed\") && this.destroy();\n    if (rebuild) {\n      this.queue.wipe();\n      rebuild(this);\n    } else {\n      this.queue.reset();\n    }\n    this.cursorPosition = 0;\n    for (let property in this.statuses) {\n      this.statuses[property] = false;\n    }\n    this.element[__privateMethod(this, _TypeIt_instances, elementIsInput_fn).call(this) ? \"value\" : \"innerHTML\"] = \"\";\n    return this;\n  }\n  type(string, actionOpts = {}) {\n    string = handleFunctionalArg(string);\n    let { instant } = actionOpts;\n    let bookEndQueueItems = __privateMethod(this, _TypeIt_instances, generateTemporaryOptionQueueItems_fn).call(this, actionOpts);\n    let chars = maybeChunkStringAsHtml(string, this.opts.html);\n    let charsAsQueueItems = chars.map((char) => {\n      return {\n        func: () => __privateMethod(this, _TypeIt_instances, type_fn).call(this, char),\n        char,\n        delay: instant || isNonVoidElement(char) ? 0 : __privateMethod(this, _TypeIt_instances, getPace_fn).call(this),\n        typeable: char.nodeType === Node.TEXT_NODE\n      };\n    });\n    let itemsToQueue = [\n      bookEndQueueItems[0],\n      { func: async () => await this.opts.beforeString(string, this) },\n      ...charsAsQueueItems,\n      { func: async () => await this.opts.afterString(string, this) },\n      bookEndQueueItems[1]\n    ];\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, itemsToQueue, actionOpts);\n  }\n  break(actionOpts = {}) {\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, {\n      func: () => __privateMethod(this, _TypeIt_instances, type_fn).call(this, createElement(\"BR\")),\n      typeable: true\n    }, actionOpts);\n  }\n  move(movementArg, actionOpts = {}) {\n    movementArg = handleFunctionalArg(movementArg);\n    let bookEndQueueItems = __privateMethod(this, _TypeIt_instances, generateTemporaryOptionQueueItems_fn).call(this, actionOpts);\n    let { instant, to } = actionOpts;\n    let numberOfSteps = countStepsToSelector({\n      queueItems: this.queue.getTypeable(),\n      selector: movementArg === null ? \"\" : movementArg,\n      to,\n      cursorPosition: __privateGet(this, _TypeIt_instances, derivedCursorPosition_get)\n    });\n    let directionalStep = numberOfSteps < 0 ? -1 : 1;\n    this.predictedCursorPosition = __privateGet(this, _TypeIt_instances, derivedCursorPosition_get) + numberOfSteps;\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, [\n      bookEndQueueItems[0],\n      ...duplicate(\n        {\n          func: () => __privateMethod(this, _TypeIt_instances, move_fn).call(this, directionalStep),\n          delay: instant ? 0 : __privateMethod(this, _TypeIt_instances, getPace_fn).call(this),\n          cursorable: true\n        },\n        Math.abs(numberOfSteps)\n      ),\n      bookEndQueueItems[1]\n    ], actionOpts);\n  }\n  exec(func, actionOpts = {}) {\n    let bookEndQueueItems = __privateMethod(this, _TypeIt_instances, generateTemporaryOptionQueueItems_fn).call(this, actionOpts);\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, [bookEndQueueItems[0], { func: () => func(this) }, bookEndQueueItems[1]], actionOpts);\n  }\n  options(opts, actionOpts = {}) {\n    opts = handleFunctionalArg(opts);\n    __privateMethod(this, _TypeIt_instances, updateOptions_fn).call(this, opts);\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, {}, actionOpts);\n  }\n  pause(milliseconds, actionOpts = {}) {\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, { delay: handleFunctionalArg(milliseconds) }, actionOpts);\n  }\n  delete(numCharacters = null, actionOpts = {}) {\n    numCharacters = handleFunctionalArg(numCharacters);\n    let bookEndQueueItems = __privateMethod(this, _TypeIt_instances, generateTemporaryOptionQueueItems_fn).call(this, actionOpts);\n    let num = numCharacters;\n    let { instant, to } = actionOpts;\n    let typeableQueueItems = this.queue.getTypeable();\n    let rounds = (() => {\n      if (num === null) {\n        return typeableQueueItems.length;\n      }\n      if (isNumber(num)) {\n        return num;\n      }\n      return countStepsToSelector({\n        queueItems: typeableQueueItems,\n        selector: num,\n        cursorPosition: __privateGet(this, _TypeIt_instances, derivedCursorPosition_get),\n        to\n      });\n    })();\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, [\n      bookEndQueueItems[0],\n      ...duplicate(\n        {\n          func: __privateMethod(this, _TypeIt_instances, delete_fn).bind(this),\n          delay: instant ? 0 : __privateMethod(this, _TypeIt_instances, getPace_fn).call(this, 1),\n          deletable: true\n        },\n        rounds\n      ),\n      bookEndQueueItems[1]\n    ], actionOpts);\n  }\n  freeze() {\n    this.statuses.frozen = true;\n  }\n  /**\n   * Like `.go()`, but more... \"off the grid.\"\n   *\n   * - won't trigger `afterComplete` callback\n   * - items won't be replayed after `.reset()`\n   *\n   * When called, all non-done items will be \"flushed\" --\n   * that is, executed, but not remembered.\n   */\n  flush(cb = () => {\n  }) {\n    __privateMethod(this, _TypeIt_instances, attachCursor_fn).call(this);\n    __privateMethod(this, _TypeIt_instances, fire_fn).call(this, false).then(cb);\n    return this;\n  }\n  getQueue() {\n    return this.queue;\n  }\n  getOptions() {\n    return this.opts;\n  }\n  updateOptions(options) {\n    return __privateMethod(this, _TypeIt_instances, updateOptions_fn).call(this, options);\n  }\n  getElement() {\n    return this.element;\n  }\n  empty(actionOpts = {}) {\n    return __privateMethod(this, _TypeIt_instances, queueAndReturn_fn).call(this, { func: __privateMethod(this, _TypeIt_instances, empty_fn).bind(this) }, actionOpts);\n  }\n}, _TypeIt_instances = new WeakSet(), empty_fn = async function() {\n  if (__privateMethod(this, _TypeIt_instances, elementIsInput_fn).call(this)) {\n    this.element.value = \"\";\n    return;\n  }\n  __privateGet(this, _TypeIt_instances, allChars_get).forEach(__privateMethod(this, _TypeIt_instances, removeNode_fn).bind(this));\n  return;\n}, fire_fn = async function(remember = true) {\n  this.statuses.started = true;\n  let cleanUp = (qKey) => {\n    this.queue.done(qKey, !remember);\n  };\n  try {\n    let queueItems = [...this.queue.getQueue()];\n    for (let index = 0; index < queueItems.length; index++) {\n      let [queueKey, queueItem] = queueItems[index];\n      if (queueItem.done) continue;\n      if (!queueItem.deletable || queueItem.deletable && __privateGet(this, _TypeIt_instances, allChars_get).length) {\n        let newIndex = await __privateMethod(this, _TypeIt_instances, fireItemWithContext_fn).call(this, index, queueItems);\n        cleanUpSkipped({\n          index,\n          newIndex,\n          queueItems,\n          cleanUp\n        });\n        index = newIndex;\n      }\n      cleanUp(queueKey);\n    }\n    if (!remember) {\n      return this;\n    }\n    this.statuses.completed = true;\n    await this.opts.afterComplete(this);\n    if (!this.opts.loop) {\n      throw \"\";\n    }\n    let delay = this.opts.loopDelay;\n    __privateMethod(this, _TypeIt_instances, wait_fn).call(this, async () => {\n      await __privateMethod(this, _TypeIt_instances, prepLoop_fn).call(this, delay[0]);\n      __privateMethod(this, _TypeIt_instances, fire_fn).call(this);\n    }, delay[1]);\n  } catch (e) {\n  }\n  return this;\n}, move_fn = async function(step) {\n  this.cursorPosition = updateCursorPosition(\n    step,\n    this.cursorPosition,\n    __privateGet(this, _TypeIt_instances, allChars_get)\n  );\n  repositionCursor(this.element, __privateGet(this, _TypeIt_instances, allChars_get), this.cursorPosition);\n}, prepLoop_fn = async function(delay) {\n  let derivedCursorPosition = __privateGet(this, _TypeIt_instances, derivedCursorPosition_get);\n  derivedCursorPosition && await __privateMethod(this, _TypeIt_instances, move_fn).call(this, { value: derivedCursorPosition });\n  let queueItems = __privateGet(this, _TypeIt_instances, allChars_get).map((c) => {\n    return [\n      Symbol(),\n      {\n        func: __privateMethod(this, _TypeIt_instances, delete_fn).bind(this),\n        delay: __privateMethod(this, _TypeIt_instances, getPace_fn).call(this, 1),\n        deletable: true,\n        shouldPauseCursor: () => true\n      }\n    ];\n  });\n  for (let index = 0; index < queueItems.length; index++) {\n    await __privateMethod(this, _TypeIt_instances, fireItemWithContext_fn).call(this, index, queueItems);\n  }\n  this.queue.reset();\n  this.queue.set(0, { delay });\n}, fireItemWithContext_fn = function(index, queueItems) {\n  return fireItem({\n    index,\n    queueItems,\n    wait: __privateMethod(this, _TypeIt_instances, wait_fn).bind(this),\n    cursor: this.cursor,\n    cursorOptions: this.opts.cursor\n  });\n}, wait_fn = async function(callback, delay, silent = false) {\n  if (this.statuses.frozen) {\n    await new Promise((resolve) => {\n      this.unfreeze = () => {\n        this.statuses.frozen = false;\n        resolve();\n      };\n    });\n  }\n  silent || await this.opts.beforeStep(this);\n  await wait(callback, delay, this.timeouts);\n  silent || await this.opts.afterStep(this);\n}, attachCursor_fn = async function() {\n  !__privateMethod(this, _TypeIt_instances, elementIsInput_fn).call(this) && this.cursor && this.element.appendChild(this.cursor);\n  if (__privateGet(this, _TypeIt_instances, shouldRenderCursor_get)) {\n    setCursorStyles(this.id, this.element);\n    this.cursor.dataset.tiAnimationId = this.id;\n    let { animation } = this.opts.cursor;\n    let { frames, options } = animation;\n    setCursorAnimation({\n      frames,\n      cursor: this.cursor,\n      options: {\n        duration: this.opts.cursorSpeed,\n        ...options\n      }\n    });\n  }\n}, elementIsInput_fn = function() {\n  return isInput(this.element);\n}, queueAndReturn_fn = function(steps, opts) {\n  this.queue.add(steps);\n  __privateMethod(this, _TypeIt_instances, maybeAppendPause_fn).call(this, opts);\n  return this;\n}, maybeAppendPause_fn = function(opts = {}) {\n  let delay = opts.delay;\n  delay && this.queue.add({ delay });\n}, generateTemporaryOptionQueueItems_fn = function(newOptions = {}) {\n  return [\n    { func: () => __privateMethod(this, _TypeIt_instances, updateOptions_fn).call(this, newOptions) },\n    { func: () => __privateMethod(this, _TypeIt_instances, updateOptions_fn).call(this, this.opts) }\n  ];\n}, updateOptions_fn = async function(opts) {\n  this.opts = merge(this.opts, opts);\n}, /**\n * Based on provided strings, generate a TypeIt queue\n * to be fired for each character in the string.\n */\ngenerateQueue_fn = function() {\n  let strings = this.opts.strings.filter((string) => !!string);\n  strings.forEach((string, index) => {\n    this.type(string);\n    if (index + 1 === strings.length) {\n      return;\n    }\n    let splitItems = this.opts.breakLines ? [{ func: () => __privateMethod(this, _TypeIt_instances, type_fn).call(this, createElement(\"BR\")), typeable: true }] : duplicate(\n      {\n        func: __privateMethod(this, _TypeIt_instances, delete_fn).bind(this),\n        delay: __privateMethod(this, _TypeIt_instances, getPace_fn).call(this, 1)\n      },\n      this.queue.getTypeable().length\n    );\n    __privateMethod(this, _TypeIt_instances, addSplitPause_fn).call(this, splitItems);\n  });\n}, _buildOptions = new WeakMap(), prependHardcodedStrings_fn = function(strings) {\n  let existingMarkup = this.element.innerHTML;\n  if (!existingMarkup) {\n    return strings;\n  }\n  this.element.innerHTML = \"\";\n  if (this.opts.startDelete) {\n    this.element.innerHTML = existingMarkup;\n    expandTextNodes(this.element);\n    __privateMethod(this, _TypeIt_instances, addSplitPause_fn).call(this, duplicate(\n      {\n        func: __privateMethod(this, _TypeIt_instances, delete_fn).bind(this),\n        delay: __privateMethod(this, _TypeIt_instances, getPace_fn).call(this, 1),\n        deletable: true\n      },\n      __privateGet(this, _TypeIt_instances, allChars_get).length\n    ));\n    return strings;\n  }\n  return splitOnBreak(existingMarkup).concat(strings);\n}, /**\n * Provided it's a non-form element and the options is provided,\n * set up the cursor element for the animation.\n */\nsetUpCursor_fn = function() {\n  if (__privateGet(this, _TypeIt_instances, isInput_get)) {\n    return null;\n  }\n  let cursor = createElement(\"span\");\n  cursor.className = CURSOR_CLASS;\n  if (!__privateGet(this, _TypeIt_instances, shouldRenderCursor_get)) {\n    cursor.style.visibility = \"hidden\";\n    return cursor;\n  }\n  cursor.innerHTML = getParsedBody(this.opts.cursorChar).innerHTML;\n  return cursor;\n}, addSplitPause_fn = function(items) {\n  let delay = this.opts.nextStringDelay;\n  this.queue.add([{ delay: delay[0] }, ...items, { delay: delay[1] }]);\n}, type_fn = function(char) {\n  insertIntoElement(this.element, char);\n}, delete_fn = function() {\n  if (!__privateGet(this, _TypeIt_instances, allChars_get).length) return;\n  if (__privateGet(this, _TypeIt_instances, isInput_get)) {\n    this.element.value = this.element.value.slice(0, -1);\n  } else {\n    __privateMethod(this, _TypeIt_instances, removeNode_fn).call(this, __privateGet(this, _TypeIt_instances, allChars_get)[this.cursorPosition]);\n  }\n}, removeNode_fn = function(node) {\n  removeNode(node, this.element);\n}, getPace_fn = function(index = 0) {\n  return calculatePace(this.opts)[index];\n}, derivedCursorPosition_get = function() {\n  return this.predictedCursorPosition ?? this.cursorPosition;\n}, isInput_get = function() {\n  return isInput(this.element);\n}, shouldRenderCursor_get = function() {\n  return !!this.opts.cursor && !__privateGet(this, _TypeIt_instances, isInput_get);\n}, allChars_get = function() {\n  return getAllChars(this.element);\n}, _a);\nconst DynamicElementComponent = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((props, ref) => {\n  const { as: As } = props;\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(As, { ref, ...props });\n});\nconst defaultPropOptions = {};\nconst TypeIt = ({\n  as = \"span\",\n  options = defaultPropOptions,\n  children = null,\n  getBeforeInit = (instance) => instance,\n  getAfterInit = (instance) => instance,\n  ...remainingProps\n}) => {\n  const elementRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const instanceRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const [shouldShowChildren, setShouldShowChildren] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [instanceOptions, setInstanceOptions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  function calculateOptions() {\n    const optionsClone = Object.assign({}, options);\n    if (children && elementRef.current) {\n      optionsClone.strings = elementRef.current.innerHTML;\n    }\n    setInstanceOptions(optionsClone);\n  }\n  function generateNewInstance() {\n    instanceRef.current = new TypeIt$1(elementRef.current, instanceOptions);\n    instanceRef.current = getBeforeInit(instanceRef.current);\n    instanceRef.current.go();\n    instanceRef.current = getAfterInit(instanceRef.current);\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    calculateOptions();\n    setShouldShowChildren(false);\n  }, [options]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    var _a2;\n    if (!instanceOptions) return;\n    ((_a2 = instanceRef.current) == null ? void 0 : _a2.updateOptions(instanceOptions)) || generateNewInstance();\n  }, [instanceOptions]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    return () => {\n      var _a2;\n      return (_a2 = instanceRef.current) == null ? void 0 : _a2.destroy();\n    };\n  }, []);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    DynamicElementComponent,\n    {\n      ref: elementRef,\n      as,\n      children: shouldShowChildren ? children : null,\n      style: { opacity: shouldShowChildren ? 0 : 1 },\n      ...remainingProps\n    }\n  );\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy90eXBlaXQtcmVhY3QvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlHQUFpRyxTQUFTO0FBQzFHLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGVBQWUsVUFBVSxjQUFjLHVCQUF1QixVQUFVLG9CQUFvQjtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtCQUErQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwwQkFBMEIsa0JBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxNQUFNO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esb0JBQW9CLGlCQUFpQixjQUFjLGlCQUFpQjtBQUNwRSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0QsZ0NBQWdDLGlEQUFVO0FBQzFDLFVBQVUsU0FBUztBQUNuQix5QkFBeUIsMERBQW1CLE9BQU8sZUFBZTtBQUNsRSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxxQkFBcUIsNkNBQU07QUFDM0Isc0JBQXNCLDZDQUFNO0FBQzVCLHNEQUFzRCwrQ0FBUTtBQUM5RCxnREFBZ0QsK0NBQVE7QUFDeEQ7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QiwwREFBbUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3R5cGVpdC1yZWFjdC9kaXN0L2luZGV4LmVzLmpzPzFiZWUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX3R5cGVFcnJvciA9IChtc2cpID0+IHtcbiAgdGhyb3cgVHlwZUVycm9yKG1zZyk7XG59O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xudmFyIF9fYWNjZXNzQ2hlY2sgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4gbWVtYmVyLmhhcyhvYmopIHx8IF9fdHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIiksIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaikpO1xudmFyIF9fcHJpdmF0ZUFkZCA9IChvYmosIG1lbWJlciwgdmFsdWUpID0+IG1lbWJlci5oYXMob2JqKSA/IF9fdHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKSA6IG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xudmFyIF9fcHJpdmF0ZU1ldGhvZCA9IChvYmosIG1lbWJlciwgbWV0aG9kKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJhY2Nlc3MgcHJpdmF0ZSBtZXRob2RcIiksIG1ldGhvZCk7XG52YXIgX1R5cGVJdF9pbnN0YW5jZXMsIGVtcHR5X2ZuLCBmaXJlX2ZuLCBtb3ZlX2ZuLCBwcmVwTG9vcF9mbiwgZmlyZUl0ZW1XaXRoQ29udGV4dF9mbiwgd2FpdF9mbiwgYXR0YWNoQ3Vyc29yX2ZuLCBlbGVtZW50SXNJbnB1dF9mbiwgcXVldWVBbmRSZXR1cm5fZm4sIG1heWJlQXBwZW5kUGF1c2VfZm4sIGdlbmVyYXRlVGVtcG9yYXJ5T3B0aW9uUXVldWVJdGVtc19mbiwgdXBkYXRlT3B0aW9uc19mbiwgZ2VuZXJhdGVRdWV1ZV9mbiwgX2J1aWxkT3B0aW9ucywgcHJlcGVuZEhhcmRjb2RlZFN0cmluZ3NfZm4sIHNldFVwQ3Vyc29yX2ZuLCBhZGRTcGxpdFBhdXNlX2ZuLCB0eXBlX2ZuLCBkZWxldGVfZm4sIHJlbW92ZU5vZGVfZm4sIGdldFBhY2VfZm4sIGRlcml2ZWRDdXJzb3JQb3NpdGlvbl9nZXQsIGlzSW5wdXRfZ2V0LCBzaG91bGRSZW5kZXJDdXJzb3JfZ2V0LCBhbGxDaGFyc19nZXQsIF9hO1xuaW1wb3J0IFJlYWN0LCB7IGZvcndhcmRSZWYsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuY29uc3QgaXNBcnJheSA9ICh0aGluZykgPT4gQXJyYXkuaXNBcnJheSh0aGluZyk7XG5jb25zdCBhc0FycmF5ID0gKHZhbHVlKSA9PiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcbmxldCBRdWV1ZSA9IGZ1bmN0aW9uKGluaXRpYWxJdGVtcykge1xuICBsZXQgYWRkID0gZnVuY3Rpb24oc3RlcHMpIHtcbiAgICBhc0FycmF5KHN0ZXBzKS5mb3JFYWNoKChzdGVwKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgcmV0dXJuIF9xLnNldChTeW1ib2woKF9hMiA9IHN0ZXAuY2hhcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5pbm5lclRleHQpLCBidWlsZFF1ZXVlSXRlbSh7IC4uLnN0ZXAgfSkpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBsZXQgZ2V0VHlwZWFibGUgPSAoKSA9PiByYXdWYWx1ZXMoKS5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZS50eXBlYWJsZSk7XG4gIGxldCBzZXQgPSBmdW5jdGlvbihpbmRleCwgaXRlbSkge1xuICAgIGxldCBrZXlzID0gWy4uLl9xLmtleXMoKV07XG4gICAgX3Euc2V0KGtleXNbaW5kZXhdLCBidWlsZFF1ZXVlSXRlbShpdGVtKSk7XG4gIH07XG4gIGxldCBidWlsZFF1ZXVlSXRlbSA9IChxdWV1ZUl0ZW0pID0+IHtcbiAgICBxdWV1ZUl0ZW0uc2hvdWxkUGF1c2VDdXJzb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMudHlwZWFibGUgfHwgdGhpcy5jdXJzb3JhYmxlIHx8IHRoaXMuZGVsZXRhYmxlKTtcbiAgICB9O1xuICAgIHJldHVybiBxdWV1ZUl0ZW07XG4gIH07XG4gIGxldCByZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIF9xLmZvckVhY2goKGl0ZW0pID0+IGRlbGV0ZSBpdGVtLmRvbmUpO1xuICB9O1xuICBsZXQgd2lwZSA9IGZ1bmN0aW9uKCkge1xuICAgIF9xID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBhZGQoaW5pdGlhbEl0ZW1zKTtcbiAgfTtcbiAgbGV0IGdldFF1ZXVlID0gKCkgPT4gX3E7XG4gIGxldCByYXdWYWx1ZXMgPSAoKSA9PiBBcnJheS5mcm9tKF9xLnZhbHVlcygpKTtcbiAgbGV0IGRlc3Ryb3kgPSAoa2V5KSA9PiBfcS5kZWxldGUoa2V5KTtcbiAgbGV0IGdldEl0ZW1zID0gKGFsbCA9IGZhbHNlKSA9PiBhbGwgPyByYXdWYWx1ZXMoKSA6IHJhd1ZhbHVlcygpLmZpbHRlcigoaSkgPT4gIWkuZG9uZSk7XG4gIGxldCBkb25lID0gKGtleSwgc2hvdWxkRGVzdHJveSA9IGZhbHNlKSA9PiBzaG91bGREZXN0cm95ID8gX3EuZGVsZXRlKGtleSkgOiBfcS5nZXQoa2V5KS5kb25lID0gdHJ1ZTtcbiAgbGV0IF9xID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgYWRkKGluaXRpYWxJdGVtcyk7XG4gIHJldHVybiB7XG4gICAgYWRkLFxuICAgIHNldCxcbiAgICB3aXBlLFxuICAgIGRvbmUsXG4gICAgcmVzZXQsXG4gICAgZGVzdHJveSxcbiAgICBnZXRJdGVtcyxcbiAgICBnZXRRdWV1ZSxcbiAgICBnZXRUeXBlYWJsZVxuICB9O1xufTtcbmNvbnN0IERBVEFfQVRUUklCVVRFID0gXCJkYXRhLXR5cGVpdC1pZFwiO1xuY29uc3QgQ1VSU09SX0NMQVNTID0gXCJ0aS1jdXJzb3JcIjtcbmNvbnN0IEVORCA9IFwiRU5EXCI7XG5jb25zdCBERUZBVUxUX1NUQVRVU0VTID0ge1xuICBzdGFydGVkOiBmYWxzZSxcbiAgY29tcGxldGVkOiBmYWxzZSxcbiAgZnJvemVuOiBmYWxzZSxcbiAgZGVzdHJveWVkOiBmYWxzZVxufTtcbmNvbnN0IERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgYnJlYWtMaW5lczogdHJ1ZSxcbiAgY3Vyc29yOiB7XG4gICAgYXV0b1BhdXNlOiB0cnVlLFxuICAgIGF1dG9QYXVzZURlbGF5OiA1MDAsXG4gICAgYW5pbWF0aW9uOiB7XG4gICAgICBmcmFtZXM6IFswLCAwLCAxXS5tYXAoKG4pID0+IHtcbiAgICAgICAgcmV0dXJuIHsgb3BhY2l0eTogbiB9O1xuICAgICAgfSksXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGl0ZXJhdGlvbnM6IEluZmluaXR5LFxuICAgICAgICBlYXNpbmc6IFwic3RlcHMoMiwgc3RhcnQpXCIsXG4gICAgICAgIGZpbGw6IFwiZm9yd2FyZHNcIlxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgY3Vyc29yQ2hhcjogXCJ8XCIsXG4gIGN1cnNvclNwZWVkOiAxZTMsXG4gIGRlbGV0ZVNwZWVkOiBudWxsLFxuICBodG1sOiB0cnVlLFxuICBsaWZlTGlrZTogdHJ1ZSxcbiAgbG9vcDogZmFsc2UsXG4gIGxvb3BEZWxheTogNzUwLFxuICBuZXh0U3RyaW5nRGVsYXk6IDc1MCxcbiAgc3BlZWQ6IDEwMCxcbiAgc3RhcnREZWxheTogMjUwLFxuICBzdGFydERlbGV0ZTogZmFsc2UsXG4gIHN0cmluZ3M6IFtdLFxuICB3YWl0VW50aWxWaXNpYmxlOiBmYWxzZSxcbiAgYmVmb3JlU3RyaW5nOiAoKSA9PiB7XG4gIH0sXG4gIGFmdGVyU3RyaW5nOiAoKSA9PiB7XG4gIH0sXG4gIGJlZm9yZVN0ZXA6ICgpID0+IHtcbiAgfSxcbiAgYWZ0ZXJTdGVwOiAoKSA9PiB7XG4gIH0sXG4gIGFmdGVyQ29tcGxldGU6ICgpID0+IHtcbiAgfVxufTtcbmNvbnN0IFBMQUNFSE9MREVSX0NTUyA9IGBbJHtEQVRBX0FUVFJJQlVURX1dOmJlZm9yZSB7Y29udGVudDogJy4nOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAwOyB2aXNpYmlsaXR5OiBoaWRkZW47fWA7XG5jb25zdCBjcmVhdGVFbGVtZW50ID0gKGVsKSA9PiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsKTtcbmNvbnN0IGNyZWF0ZVRleHROb2RlID0gKGNvbnRlbnQpID0+IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbnRlbnQpO1xuY29uc3QgYXBwZW5kU3R5bGVCbG9jayA9IChzdHlsZXMsIGlkID0gXCJcIikgPT4ge1xuICBsZXQgc3R5bGVCbG9jayA9IGNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgc3R5bGVCbG9jay5pZCA9IGlkO1xuICBzdHlsZUJsb2NrLmFwcGVuZENoaWxkKGNyZWF0ZVRleHROb2RlKHN0eWxlcykpO1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlQmxvY2spO1xufTtcbmNvbnN0IGNhbGN1bGF0ZURlbGF5ID0gKGRlbGF5QXJnKSA9PiB7XG4gIGlmICghaXNBcnJheShkZWxheUFyZykpIHtcbiAgICBkZWxheUFyZyA9IFtkZWxheUFyZyAvIDIsIGRlbGF5QXJnIC8gMl07XG4gIH1cbiAgcmV0dXJuIGRlbGF5QXJnO1xufTtcbmNvbnN0IHJhbmRvbUluUmFuZ2UgPSAodmFsdWUsIHJhbmdlMikgPT4ge1xuICByZXR1cm4gTWF0aC5hYnMoXG4gICAgTWF0aC5yYW5kb20oKSAqICh2YWx1ZSArIHJhbmdlMiAtICh2YWx1ZSAtIHJhbmdlMikpICsgKHZhbHVlIC0gcmFuZ2UyKVxuICApO1xufTtcbmxldCByYW5nZSA9ICh2YWwpID0+IHZhbCAvIDI7XG5mdW5jdGlvbiBjYWxjdWxhdGVQYWNlKG9wdGlvbnMpIHtcbiAgbGV0IHsgc3BlZWQsIGRlbGV0ZVNwZWVkLCBsaWZlTGlrZSB9ID0gb3B0aW9ucztcbiAgZGVsZXRlU3BlZWQgPSBkZWxldGVTcGVlZCAhPT0gbnVsbCA/IGRlbGV0ZVNwZWVkIDogc3BlZWQgLyAzO1xuICByZXR1cm4gbGlmZUxpa2UgPyBbXG4gICAgcmFuZG9tSW5SYW5nZShzcGVlZCwgcmFuZ2Uoc3BlZWQpKSxcbiAgICByYW5kb21JblJhbmdlKGRlbGV0ZVNwZWVkLCByYW5nZShkZWxldGVTcGVlZCkpXG4gIF0gOiBbc3BlZWQsIGRlbGV0ZVNwZWVkXTtcbn1cbmNvbnN0IHRvQXJyYXkgPSAodmFsKSA9PiBBcnJheS5mcm9tKHZhbCk7XG5sZXQgZXhwYW5kVGV4dE5vZGVzID0gKGVsZW1lbnQpID0+IHtcbiAgWy4uLmVsZW1lbnQuY2hpbGROb2Rlc10uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICBpZiAoY2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICBbLi4uY2hpbGQubm9kZVZhbHVlXS5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgIGNoaWxkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNyZWF0ZVRleHROb2RlKGMpLCBjaGlsZCk7XG4gICAgICB9KTtcbiAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBleHBhbmRUZXh0Tm9kZXMoY2hpbGQpO1xuICB9KTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuY29uc3QgZ2V0UGFyc2VkQm9keSA9IChjb250ZW50KSA9PiB7XG4gIGxldCBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcbiAgZG9jLmJvZHkuaW5uZXJIVE1MID0gY29udGVudDtcbiAgcmV0dXJuIGV4cGFuZFRleHROb2Rlcyhkb2MuYm9keSk7XG59O1xuZnVuY3Rpb24gd2Fsa0VsZW1lbnROb2RlcyhlbGVtZW50LCBzaG91bGRSZXZlcnNlID0gZmFsc2UsIHNob3VsZEluY2x1ZGVDdXJzb3IgPSBmYWxzZSkge1xuICBsZXQgY3Vyc29yID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtDVVJTT1JfQ0xBU1N9YCk7XG4gIGxldCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGVsZW1lbnQsIE5vZGVGaWx0ZXIuU0hPV19BTEwsIHtcbiAgICBhY2NlcHROb2RlOiAobm9kZSkgPT4ge1xuICAgICAgdmFyIF9hMiwgX2I7XG4gICAgICBpZiAoY3Vyc29yICYmIHNob3VsZEluY2x1ZGVDdXJzb3IpIHtcbiAgICAgICAgaWYgKChfYTIgPSBub2RlLmNsYXNzTGlzdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jb250YWlucyhDVVJTT1JfQ0xBU1MpKSB7XG4gICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3Vyc29yLmNvbnRhaW5zKG5vZGUpKSB7XG4gICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuICgoX2IgPSBub2RlLmNsYXNzTGlzdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNvbnRhaW5zKENVUlNPUl9DTEFTUykpID8gTm9kZUZpbHRlci5GSUxURVJfUkVKRUNUIDogTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUO1xuICAgIH1cbiAgfSk7XG4gIGxldCBuZXh0Tm9kZTtcbiAgbGV0IG5vZGVzID0gW107XG4gIHdoaWxlIChuZXh0Tm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgaWYgKCFuZXh0Tm9kZS5vcmlnaW5hbFBhcmVudCkge1xuICAgICAgbmV4dE5vZGUub3JpZ2luYWxQYXJlbnQgPSBuZXh0Tm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICBub2Rlcy5wdXNoKG5leHROb2RlKTtcbiAgfVxuICByZXR1cm4gc2hvdWxkUmV2ZXJzZSA/IG5vZGVzLnJldmVyc2UoKSA6IG5vZGVzO1xufVxuZnVuY3Rpb24gY2h1bmtTdHJpbmdBc0h0bWwoc3RyaW5nKSB7XG4gIHJldHVybiB3YWxrRWxlbWVudE5vZGVzKGdldFBhcnNlZEJvZHkoc3RyaW5nKSk7XG59XG5mdW5jdGlvbiBtYXliZUNodW5rU3RyaW5nQXNIdG1sKHN0ciwgYXNIdG1sID0gdHJ1ZSkge1xuICByZXR1cm4gYXNIdG1sID8gY2h1bmtTdHJpbmdBc0h0bWwoc3RyKSA6IHRvQXJyYXkoc3RyKS5tYXAoY3JlYXRlVGV4dE5vZGUpO1xufVxuY29uc3QgY2xlYW5VcFNraXBwZWQgPSAoe1xuICBpbmRleCxcbiAgbmV3SW5kZXgsXG4gIHF1ZXVlSXRlbXMsXG4gIGNsZWFuVXBcbn0pID0+IHtcbiAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IG5ld0luZGV4ICsgMTsgaSsrKSB7XG4gICAgY2xlYW5VcChxdWV1ZUl0ZW1zW2ldWzBdKTtcbiAgfVxufTtcbmNvbnN0IGlzTnVtYmVyID0gKHZhbHVlKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKTtcbmNvbnN0IGNvdW50U3RlcHNUb1NlbGVjdG9yID0gKHtcbiAgcXVldWVJdGVtcyxcbiAgc2VsZWN0b3IsXG4gIGN1cnNvclBvc2l0aW9uLFxuICB0b1xufSkgPT4ge1xuICBpZiAoaXNOdW1iZXIoc2VsZWN0b3IpKSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yICogLTE7XG4gIH1cbiAgbGV0IGlzTW92aW5nVG9FbmQgPSBuZXcgUmVnRXhwKEVORCwgXCJpXCIpLnRlc3QodG8pO1xuICBsZXQgc2VsZWN0b3JJbmRleCA9IHNlbGVjdG9yID8gWy4uLnF1ZXVlSXRlbXNdLnJldmVyc2UoKS5maW5kSW5kZXgoKHsgY2hhciB9KSA9PiB7XG4gICAgbGV0IHBhcmVudEVsZW1lbnQgPSBjaGFyLnBhcmVudEVsZW1lbnQ7XG4gICAgbGV0IHBhcmVudE1hdGNoZXMgPSBwYXJlbnRFbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgIGlmIChpc01vdmluZ1RvRW5kICYmIHBhcmVudE1hdGNoZXMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcGFyZW50TWF0Y2hlcyAmJiBwYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQuaXNTYW1lTm9kZShjaGFyKTtcbiAgfSkgOiAtMTtcbiAgaWYgKHNlbGVjdG9ySW5kZXggPCAwKSB7XG4gICAgc2VsZWN0b3JJbmRleCA9IGlzTW92aW5nVG9FbmQgPyAwIDogcXVldWVJdGVtcy5sZW5ndGggLSAxO1xuICB9XG4gIGxldCBvZmZzZXQgPSBpc01vdmluZ1RvRW5kID8gMCA6IDE7XG4gIHJldHVybiBzZWxlY3RvckluZGV4IC0gY3Vyc29yUG9zaXRpb24gKyBvZmZzZXQ7XG59O1xuY29uc3QgZGVzdHJveVRpbWVvdXRzID0gKHRpbWVvdXRzKSA9PiB7XG4gIHRpbWVvdXRzLmZvckVhY2goY2xlYXJUaW1lb3V0KTtcbiAgcmV0dXJuIFtdO1xufTtcbmNvbnN0IGR1cGxpY2F0ZSA9ICh2YWx1ZSwgdGltZXMpID0+IG5ldyBBcnJheSh0aW1lcykuZmlsbCh2YWx1ZSk7XG5sZXQgYmVmb3JlUGFpbnQgPSAoY2IpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFzeW5jICgpID0+IHtcbiAgICAgIHJlc29sdmUoYXdhaXQgY2IoKSk7XG4gICAgfSk7XG4gIH0pO1xufTtcbmxldCBnZXRBbmltYXRpb25Gcm9tRWxlbWVudCA9IChlbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50ID09IG51bGwgPyB2b2lkIDAgOiBlbGVtZW50LmdldEFuaW1hdGlvbnMoKS5maW5kKChhbmltYXRpb24pID0+IHtcbiAgICByZXR1cm4gYW5pbWF0aW9uLmlkID09PSBlbGVtZW50LmRhdGFzZXQudGlBbmltYXRpb25JZDtcbiAgfSk7XG59O1xubGV0IHNldEN1cnNvckFuaW1hdGlvbiA9ICh7XG4gIGN1cnNvcixcbiAgZnJhbWVzLFxuICBvcHRpb25zXG59KSA9PiB7XG4gIGxldCBhbmltYXRpb24gPSBjdXJzb3IuYW5pbWF0ZShmcmFtZXMsIG9wdGlvbnMpO1xuICBhbmltYXRpb24ucGF1c2UoKTtcbiAgYW5pbWF0aW9uLmlkID0gY3Vyc29yLmRhdGFzZXQudGlBbmltYXRpb25JZDtcbiAgYmVmb3JlUGFpbnQoKCkgPT4ge1xuICAgIGJlZm9yZVBhaW50KCgpID0+IHtcbiAgICAgIGFuaW1hdGlvbi5wbGF5KCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gYW5pbWF0aW9uO1xufTtcbmxldCByZWJ1aWxkQ3Vyc29yQW5pbWF0aW9uID0gKHtcbiAgY3Vyc29yLFxuICBvcHRpb25zLFxuICBjdXJzb3JPcHRpb25zXG59KSA9PiB7XG4gIGlmICghY3Vyc29yIHx8ICFjdXJzb3JPcHRpb25zKSByZXR1cm47XG4gIGxldCBhbmltYXRpb24gPSBnZXRBbmltYXRpb25Gcm9tRWxlbWVudChjdXJzb3IpO1xuICBsZXQgb2xkQ3VycmVudFRpbWU7XG4gIGlmIChhbmltYXRpb24pIHtcbiAgICBvcHRpb25zLmRlbGF5ID0gYW5pbWF0aW9uLmVmZmVjdC5nZXRDb21wdXRlZFRpbWluZygpLmRlbGF5O1xuICAgIG9sZEN1cnJlbnRUaW1lID0gYW5pbWF0aW9uLmN1cnJlbnRUaW1lO1xuICAgIGFuaW1hdGlvbi5jYW5jZWwoKTtcbiAgfVxuICBsZXQgbmV3QW5pbWF0aW9uID0gc2V0Q3Vyc29yQW5pbWF0aW9uKHtcbiAgICBjdXJzb3IsXG4gICAgZnJhbWVzOiBjdXJzb3JPcHRpb25zLmFuaW1hdGlvbi5mcmFtZXMsXG4gICAgb3B0aW9uc1xuICB9KTtcbiAgaWYgKG9sZEN1cnJlbnRUaW1lKSB7XG4gICAgbmV3QW5pbWF0aW9uLmN1cnJlbnRUaW1lID0gb2xkQ3VycmVudFRpbWU7XG4gIH1cbiAgcmV0dXJuIG5ld0FuaW1hdGlvbjtcbn07XG5sZXQgZXhlY3V0ZSA9IChxdWV1ZUl0ZW0pID0+IHtcbiAgdmFyIF9hMjtcbiAgcmV0dXJuIChfYTIgPSBxdWV1ZUl0ZW0uZnVuYykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jYWxsKG51bGwpO1xufTtcbmxldCBmaXJlSXRlbSA9IGFzeW5jICh7XG4gIGluZGV4LFxuICBxdWV1ZUl0ZW1zLFxuICB3YWl0OiB3YWl0MixcbiAgY3Vyc29yLFxuICBjdXJzb3JPcHRpb25zXG59KSA9PiB7XG4gIGxldCBxdWV1ZUl0ZW0gPSBxdWV1ZUl0ZW1zW2luZGV4XVsxXTtcbiAgbGV0IGluc3RhbnRRdWV1ZSA9IFtdO1xuICBsZXQgdGVtcEluZGV4ID0gaW5kZXg7XG4gIGxldCBmdXR1cmVJdGVtID0gcXVldWVJdGVtO1xuICBsZXQgc2hvdWxkQmVHcm91cGVkID0gKCkgPT4gZnV0dXJlSXRlbSAmJiAhZnV0dXJlSXRlbS5kZWxheTtcbiAgbGV0IHNob3VsZFBhdXNlQ3Vyc29yID0gcXVldWVJdGVtLnNob3VsZFBhdXNlQ3Vyc29yKCkgJiYgY3Vyc29yT3B0aW9ucy5hdXRvUGF1c2U7XG4gIHdoaWxlIChzaG91bGRCZUdyb3VwZWQoKSkge1xuICAgIGluc3RhbnRRdWV1ZS5wdXNoKGZ1dHVyZUl0ZW0pO1xuICAgIHNob3VsZEJlR3JvdXBlZCgpICYmIHRlbXBJbmRleCsrO1xuICAgIGZ1dHVyZUl0ZW0gPSBxdWV1ZUl0ZW1zW3RlbXBJbmRleF0gPyBxdWV1ZUl0ZW1zW3RlbXBJbmRleF1bMV0gOiBudWxsO1xuICB9XG4gIGlmIChpbnN0YW50UXVldWUubGVuZ3RoKSB7XG4gICAgYXdhaXQgYmVmb3JlUGFpbnQoYXN5bmMgKCkgPT4ge1xuICAgICAgZm9yIChsZXQgcSBvZiBpbnN0YW50UXVldWUpIHtcbiAgICAgICAgYXdhaXQgZXhlY3V0ZShxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGVtcEluZGV4IC0gMTtcbiAgfVxuICBsZXQgYW5pbWF0aW9uID0gZ2V0QW5pbWF0aW9uRnJvbUVsZW1lbnQoY3Vyc29yKTtcbiAgbGV0IG9wdGlvbnM7XG4gIGlmIChhbmltYXRpb24pIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgLi4uYW5pbWF0aW9uLmVmZmVjdC5nZXRDb21wdXRlZFRpbWluZygpLFxuICAgICAgZGVsYXk6IHNob3VsZFBhdXNlQ3Vyc29yID8gY3Vyc29yT3B0aW9ucy5hdXRvUGF1c2VEZWxheSA6IDBcbiAgICB9O1xuICB9XG4gIGF3YWl0IHdhaXQyKGFzeW5jICgpID0+IHtcbiAgICBpZiAoYW5pbWF0aW9uICYmIHNob3VsZFBhdXNlQ3Vyc29yKSB7XG4gICAgICBhbmltYXRpb24uY2FuY2VsKCk7XG4gICAgfVxuICAgIGF3YWl0IGJlZm9yZVBhaW50KCgpID0+IHtcbiAgICAgIGV4ZWN1dGUocXVldWVJdGVtKTtcbiAgICB9KTtcbiAgfSwgcXVldWVJdGVtLmRlbGF5KTtcbiAgYXdhaXQgcmVidWlsZEN1cnNvckFuaW1hdGlvbih7XG4gICAgY3Vyc29yLFxuICAgIG9wdGlvbnMsXG4gICAgY3Vyc29yT3B0aW9uc1xuICB9KTtcbiAgcmV0dXJuIGluZGV4O1xufTtcbmNvbnN0IGZpcmVXaGVuVmlzaWJsZSA9IChlbGVtZW50LCBmdW5jKSA9PiB7XG4gIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAoZW50cmllcywgb2JzZXJ2ZXIyKSA9PiB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgIGZ1bmMoKTtcbiAgICAgICAgICBvYnNlcnZlcjIudW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHsgdGhyZXNob2xkOiAxIH1cbiAgKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbn07XG5jb25zdCBnZW5lcmF0ZUhhc2ggPSAoKSA9PiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIsIDkpO1xuY29uc3QgaXNJbnB1dCA9IChlbCkgPT4ge1xuICByZXR1cm4gXCJ2YWx1ZVwiIGluIGVsO1xufTtcbmxldCBnZXRBbGxDaGFycyA9IChlbGVtZW50KSA9PiB7XG4gIGlmIChpc0lucHV0KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIHRvQXJyYXkoZWxlbWVudC52YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHdhbGtFbGVtZW50Tm9kZXMoZWxlbWVudCwgdHJ1ZSkuZmlsdGVyKFxuICAgIChjKSA9PiAhKGMuY2hpbGROb2Rlcy5sZW5ndGggPiAwKVxuICApO1xufTtcbmxldCBoYW5kbGVGdW5jdGlvbmFsQXJnID0gKGFyZykgPT4ge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gXCJmdW5jdGlvblwiID8gYXJnKCkgOiBhcmc7XG59O1xubGV0IHNlbGVjdCA9IChzZWxlY3RvciwgZWxlbWVudCA9IGRvY3VtZW50LCBhbGwgPSBmYWxzZSkgPT4ge1xuICByZXR1cm4gZWxlbWVudFtgcXVlcnlTZWxlY3RvciR7YWxsID8gXCJBbGxcIiA6IFwiXCJ9YF0oc2VsZWN0b3IpO1xufTtcbmxldCBpc0JvZHlFbGVtZW50ID0gKG5vZGUpID0+IC9ib2R5L2kudGVzdChub2RlID09IG51bGwgPyB2b2lkIDAgOiBub2RlLnRhZ05hbWUpO1xubGV0IGluc2VydEludG9FbGVtZW50ID0gKG9yaWdpbmFsVGFyZ2V0LCBjaGFyYWN0ZXIpID0+IHtcbiAgaWYgKGlzSW5wdXQob3JpZ2luYWxUYXJnZXQpKSB7XG4gICAgb3JpZ2luYWxUYXJnZXQudmFsdWUgPSBgJHtvcmlnaW5hbFRhcmdldC52YWx1ZX0ke2NoYXJhY3Rlci50ZXh0Q29udGVudH1gO1xuICAgIHJldHVybjtcbiAgfVxuICBjaGFyYWN0ZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgbGV0IHRhcmdldCA9IGlzQm9keUVsZW1lbnQoY2hhcmFjdGVyLm9yaWdpbmFsUGFyZW50KSA/IG9yaWdpbmFsVGFyZ2V0IDogKFxuICAgIC8vIElmIHdlIGFkZCBvbmUtb2ZmIGZyZXNoIGVsZW1lbnRzLCB0aGVyZSB3aWxsIGJlIG5vXG4gICAgLy8gXCJvcmlnaW5hbFBhcmVudFwiLCBzbyBhbHdheXMgZmFsbCBiYWNrIHRvIHRoZSBkZWZhdWx0IHRhcmdldC5cbiAgICBjaGFyYWN0ZXIub3JpZ2luYWxQYXJlbnQgfHwgb3JpZ2luYWxUYXJnZXRcbiAgKTtcbiAgdGFyZ2V0Lmluc2VydEJlZm9yZShcbiAgICBjaGFyYWN0ZXIsXG4gICAgc2VsZWN0KFwiLlwiICsgQ1VSU09SX0NMQVNTLCB0YXJnZXQpIHx8IG51bGxcbiAgKTtcbn07XG5jb25zdCBpc05vblZvaWRFbGVtZW50ID0gKGVsKSA9PiAvPCguKyk+KC4qPyk8XFwvKC4rKT4vLnRlc3QoZWwub3V0ZXJIVE1MKTtcbmNvbnN0IG1lcmdlID0gKG9yaWdpbmFsT2JqLCBuZXdPYmopID0+IE9iamVjdC5hc3NpZ24oe30sIG9yaWdpbmFsT2JqLCBuZXdPYmopO1xubGV0IHByb2Nlc3NDdXJzb3JPcHRpb25zID0gKGN1cnNvck9wdGlvbnMpID0+IHtcbiAgdmFyIF9hMiwgX2I7XG4gIGlmICh0eXBlb2YgY3Vyc29yT3B0aW9ucyA9PT0gXCJvYmplY3RcIikge1xuICAgIGxldCBuZXdPcHRpb25zID0ge307XG4gICAgbGV0IHsgZnJhbWVzOiBkZWZhdWx0RnJhbWVzLCBvcHRpb25zOiBkZWZhdWx0T3B0aW9ucyB9ID0gREVGQVVMVF9PUFRJT05TLmN1cnNvci5hbmltYXRpb247XG4gICAgbmV3T3B0aW9ucy5hbmltYXRpb24gPSBjdXJzb3JPcHRpb25zLmFuaW1hdGlvbiB8fCB7fTtcbiAgICBuZXdPcHRpb25zLmFuaW1hdGlvbi5mcmFtZXMgPSAoKF9hMiA9IGN1cnNvck9wdGlvbnMuYW5pbWF0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmZyYW1lcykgfHwgZGVmYXVsdEZyYW1lcztcbiAgICBuZXdPcHRpb25zLmFuaW1hdGlvbi5vcHRpb25zID0gbWVyZ2UoXG4gICAgICBkZWZhdWx0T3B0aW9ucyxcbiAgICAgICgoX2IgPSBjdXJzb3JPcHRpb25zLmFuaW1hdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm9wdGlvbnMpIHx8IHt9XG4gICAgKTtcbiAgICBuZXdPcHRpb25zLmF1dG9QYXVzZSA9IGN1cnNvck9wdGlvbnMuYXV0b1BhdXNlID8/IERFRkFVTFRfT1BUSU9OUy5jdXJzb3IuYXV0b1BhdXNlO1xuICAgIG5ld09wdGlvbnMuYXV0b1BhdXNlRGVsYXkgPSBjdXJzb3JPcHRpb25zLmF1dG9QYXVzZURlbGF5IHx8IERFRkFVTFRfT1BUSU9OUy5jdXJzb3IuYXV0b1BhdXNlRGVsYXk7XG4gICAgcmV0dXJuIG5ld09wdGlvbnM7XG4gIH1cbiAgaWYgKGN1cnNvck9wdGlvbnMgPT09IHRydWUpIHtcbiAgICByZXR1cm4gREVGQVVMVF9PUFRJT05TLmN1cnNvcjtcbiAgfVxuICByZXR1cm4gY3Vyc29yT3B0aW9ucztcbn07XG5jb25zdCByZW1vdmVOb2RlID0gKG5vZGUsIHJvb3RFbGVtZW50KSA9PiB7XG4gIGlmICghbm9kZSkgcmV0dXJuO1xuICBsZXQgbm9kZVBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgbGV0IG5vZGVUb1JlbW92ZSA9IG5vZGVQYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8IG5vZGVQYXJlbnQuaXNTYW1lTm9kZShyb290RWxlbWVudCkgPyAoXG4gICAgLy8gVGhpcyBwYXJlbnQgc3RpbGwgbmVlZHMgdG8gZXhpc3QuXG4gICAgbm9kZVxuICApIDogKFxuICAgIC8vIFRoZXJlJ3Mgbm90aGluZyBlbHNlIGluIHRoZXJlLCBzbyBqdXN0IGRlbGV0ZSB0aGUgZW50aXJlIHRoaW5nLlxuICAgIC8vIEJ5IGRvaW5nIHRoaXMsIHdlIGNsZWFuIHVwIG1hcmt1cCBhcyB3ZSBnbyBhbG9uZy5cbiAgICBub2RlUGFyZW50XG4gICk7XG4gIG5vZGVUb1JlbW92ZS5yZW1vdmUoKTtcbn07XG5jb25zdCByZXBvc2l0aW9uQ3Vyc29yID0gKGVsZW1lbnQsIGFsbENoYXJzLCBuZXdDdXJzb3JQb3NpdGlvbikgPT4ge1xuICBsZXQgbm9kZVRvSW5zZXJ0QmVmb3JlID0gYWxsQ2hhcnNbbmV3Q3Vyc29yUG9zaXRpb24gLSAxXTtcbiAgbGV0IGN1cnNvciA9IHNlbGVjdChgLiR7Q1VSU09SX0NMQVNTfWAsIGVsZW1lbnQpO1xuICBlbGVtZW50ID0gKG5vZGVUb0luc2VydEJlZm9yZSA9PSBudWxsID8gdm9pZCAwIDogbm9kZVRvSW5zZXJ0QmVmb3JlLnBhcmVudE5vZGUpIHx8IGVsZW1lbnQ7XG4gIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGN1cnNvciwgbm9kZVRvSW5zZXJ0QmVmb3JlIHx8IG51bGwpO1xufTtcbmZ1bmN0aW9uIHNlbGVjdG9yVG9FbGVtZW50KHRoaW5nKSB7XG4gIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IFwic3RyaW5nXCIgPyBzZWxlY3QodGhpbmcpIDogdGhpbmc7XG59XG5sZXQgY3Vyc29yRm9udFN0eWxlcyA9IHtcbiAgXCJmb250LWZhbWlseVwiOiBcIlwiLFxuICBcImZvbnQtd2VpZ2h0XCI6IFwiXCIsXG4gIFwiZm9udC1zaXplXCI6IFwiXCIsXG4gIFwiZm9udC1zdHlsZVwiOiBcIlwiLFxuICBcImxpbmUtaGVpZ2h0XCI6IFwiXCIsXG4gIGNvbG9yOiBcIlwiLFxuICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgtLjEyNWVtKVwiXG59O1xubGV0IHNldEN1cnNvclN0eWxlcyA9IChpZCwgZWxlbWVudCkgPT4ge1xuICBsZXQgcm9vdFNlbGVjdG9yID0gYFske0RBVEFfQVRUUklCVVRFfT0nJHtpZH0nXWA7XG4gIGxldCBjdXJzb3JTZWxlY3RvciA9IGAke3Jvb3RTZWxlY3Rvcn0gLiR7Q1VSU09SX0NMQVNTfWA7XG4gIGxldCBjb21wdXRlZFN0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIGxldCBjdXN0b21Qcm9wZXJ0aWVzID0gT2JqZWN0LmVudHJpZXMoY3Vyc29yRm9udFN0eWxlcykucmVkdWNlKFxuICAgIChhY2N1bXVsYXRvciwgW2l0ZW0sIHZhbHVlXSkgPT4ge1xuICAgICAgcmV0dXJuIGAke2FjY3VtdWxhdG9yfSAke2l0ZW19OiB2YXIoLS10aS1jdXJzb3ItJHtpdGVtfSwgJHt2YWx1ZSB8fCBjb21wdXRlZFN0eWxlc1tpdGVtXX0pO2A7XG4gICAgfSxcbiAgICBcIlwiXG4gICk7XG4gIGFwcGVuZFN0eWxlQmxvY2soXG4gICAgYCR7Y3Vyc29yU2VsZWN0b3J9IHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogMDsgJHtjdXN0b21Qcm9wZXJ0aWVzfSB9YCxcbiAgICBpZFxuICApO1xufTtcbmZ1bmN0aW9uIHNwbGl0T25CcmVhayhzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC88IS0tKC4rPyktLT4vZywgXCJcIikudHJpbSgpLnNwbGl0KC88YnIoPzpcXHMqPykoPzpcXC8pPz4vKTtcbn1cbmxldCB1cGRhdGVDdXJzb3JQb3NpdGlvbiA9IChzdGVwcywgY3Vyc29yUG9zaXRpb24sIHByaW50ZWRDaGFyYWN0ZXJzKSA9PiB7XG4gIHJldHVybiBNYXRoLm1pbihcbiAgICBNYXRoLm1heChjdXJzb3JQb3NpdGlvbiArIHN0ZXBzLCAwKSxcbiAgICBwcmludGVkQ2hhcmFjdGVycy5sZW5ndGhcbiAgKTtcbn07XG5sZXQgd2FpdCA9IChjYWxsYmFjaywgZGVsYXksIHRpbWVvdXRzKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGxldCBjYiA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfTtcbiAgICB0aW1lb3V0cy5wdXNoKHNldFRpbWVvdXQoY2IsIGRlbGF5IHx8IDApKTtcbiAgfSk7XG59O1xubGV0IFR5cGVJdCQxID0gKF9hID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJlbGVtZW50XCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ0aW1lb3V0c1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY3Vyc29yUG9zaXRpb25cIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInByZWRpY3RlZEN1cnNvclBvc2l0aW9uXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzdGF0dXNlc1wiLCB7XG4gICAgICBzdGFydGVkOiBmYWxzZSxcbiAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICBmcm96ZW46IGZhbHNlLFxuICAgICAgZGVzdHJveWVkOiBmYWxzZVxuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvcHRzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpZFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicXVldWVcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImN1cnNvclwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidW5mcmVlemVcIiwgKCkgPT4ge1xuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpc1wiLCBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXR1c2VzW2tleV07XG4gICAgfSk7XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9idWlsZE9wdGlvbnMsIChvcHRpb25zKSA9PiB7XG4gICAgICBvcHRpb25zLmN1cnNvciA9IHByb2Nlc3NDdXJzb3JPcHRpb25zKFxuICAgICAgICBvcHRpb25zLmN1cnNvciA/PyBERUZBVUxUX09QVElPTlMuY3Vyc29yXG4gICAgICApO1xuICAgICAgdGhpcy5vcHRzLnN0cmluZ3MgPSBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHByZXBlbmRIYXJkY29kZWRTdHJpbmdzX2ZuKS5jYWxsKHRoaXMsIGFzQXJyYXkodGhpcy5vcHRzLnN0cmluZ3MpKTtcbiAgICAgIHRoaXMub3B0cyA9IG1lcmdlKHRoaXMub3B0cywge1xuICAgICAgICBodG1sOiAhX19wcml2YXRlR2V0KHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBpc0lucHV0X2dldCkgJiYgdGhpcy5vcHRzLmh0bWwsXG4gICAgICAgIG5leHRTdHJpbmdEZWxheTogY2FsY3VsYXRlRGVsYXkodGhpcy5vcHRzLm5leHRTdHJpbmdEZWxheSksXG4gICAgICAgIGxvb3BEZWxheTogY2FsY3VsYXRlRGVsYXkodGhpcy5vcHRzLmxvb3BEZWxheSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMub3B0cyA9IG1lcmdlKERFRkFVTFRfT1BUSU9OUywgb3B0aW9ucyk7XG4gICAgdGhpcy5lbGVtZW50ID0gc2VsZWN0b3JUb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgdGhpcy50aW1lb3V0cyA9IFtdO1xuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24gPSAwO1xuICAgIHRoaXMudW5mcmVlemUgPSAoKSA9PiB7XG4gICAgfTtcbiAgICB0aGlzLnByZWRpY3RlZEN1cnNvclBvc2l0aW9uID0gbnVsbDtcbiAgICB0aGlzLnN0YXR1c2VzID0gbWVyZ2Uoe30sIERFRkFVTFRfU1RBVFVTRVMpO1xuICAgIHRoaXMuaWQgPSBnZW5lcmF0ZUhhc2goKTtcbiAgICB0aGlzLnF1ZXVlID0gUXVldWUoW3sgZGVsYXk6IHRoaXMub3B0cy5zdGFydERlbGF5IH1dKTtcbiAgICBfX3ByaXZhdGVHZXQodGhpcywgX2J1aWxkT3B0aW9ucykuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB0aGlzLmN1cnNvciA9IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgc2V0VXBDdXJzb3JfZm4pLmNhbGwodGhpcyk7XG4gICAgdGhpcy5lbGVtZW50LmRhdGFzZXQudHlwZWl0SWQgPSB0aGlzLmlkO1xuICAgIGFwcGVuZFN0eWxlQmxvY2soUExBQ0VIT0xERVJfQ1NTKTtcbiAgICBpZiAodGhpcy5vcHRzLnN0cmluZ3MubGVuZ3RoKSB7XG4gICAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGdlbmVyYXRlUXVldWVfZm4pLmNhbGwodGhpcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYW4gb25seSBiZSBjYWxsZWQgb25jZS5cbiAgICovXG4gIGdvKCkge1xuICAgIGlmICh0aGlzLnN0YXR1c2VzLnN0YXJ0ZWQpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGF0dGFjaEN1cnNvcl9mbikuY2FsbCh0aGlzKTtcbiAgICBpZiAoIXRoaXMub3B0cy53YWl0VW50aWxWaXNpYmxlKSB7XG4gICAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGZpcmVfZm4pLmNhbGwodGhpcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZmlyZVdoZW5WaXNpYmxlKHRoaXMuZWxlbWVudCwgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBmaXJlX2ZuKS5iaW5kKHRoaXMpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkZXN0cm95KHNob3VsZFJlbW92ZUN1cnNvciA9IHRydWUpIHtcbiAgICB0aGlzLnRpbWVvdXRzID0gZGVzdHJveVRpbWVvdXRzKHRoaXMudGltZW91dHMpO1xuICAgIGhhbmRsZUZ1bmN0aW9uYWxBcmcoc2hvdWxkUmVtb3ZlQ3Vyc29yKSAmJiB0aGlzLmN1cnNvciAmJiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHJlbW92ZU5vZGVfZm4pLmNhbGwodGhpcywgdGhpcy5jdXJzb3IpO1xuICAgIHRoaXMuc3RhdHVzZXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuICByZXNldChyZWJ1aWxkKSB7XG4gICAgIXRoaXMuaXMoXCJkZXN0cm95ZWRcIikgJiYgdGhpcy5kZXN0cm95KCk7XG4gICAgaWYgKHJlYnVpbGQpIHtcbiAgICAgIHRoaXMucXVldWUud2lwZSgpO1xuICAgICAgcmVidWlsZCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5xdWV1ZS5yZXNldCgpO1xuICAgIH1cbiAgICB0aGlzLmN1cnNvclBvc2l0aW9uID0gMDtcbiAgICBmb3IgKGxldCBwcm9wZXJ0eSBpbiB0aGlzLnN0YXR1c2VzKSB7XG4gICAgICB0aGlzLnN0YXR1c2VzW3Byb3BlcnR5XSA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRbX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBlbGVtZW50SXNJbnB1dF9mbikuY2FsbCh0aGlzKSA/IFwidmFsdWVcIiA6IFwiaW5uZXJIVE1MXCJdID0gXCJcIjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0eXBlKHN0cmluZywgYWN0aW9uT3B0cyA9IHt9KSB7XG4gICAgc3RyaW5nID0gaGFuZGxlRnVuY3Rpb25hbEFyZyhzdHJpbmcpO1xuICAgIGxldCB7IGluc3RhbnQgfSA9IGFjdGlvbk9wdHM7XG4gICAgbGV0IGJvb2tFbmRRdWV1ZUl0ZW1zID0gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBnZW5lcmF0ZVRlbXBvcmFyeU9wdGlvblF1ZXVlSXRlbXNfZm4pLmNhbGwodGhpcywgYWN0aW9uT3B0cyk7XG4gICAgbGV0IGNoYXJzID0gbWF5YmVDaHVua1N0cmluZ0FzSHRtbChzdHJpbmcsIHRoaXMub3B0cy5odG1sKTtcbiAgICBsZXQgY2hhcnNBc1F1ZXVlSXRlbXMgPSBjaGFycy5tYXAoKGNoYXIpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZ1bmM6ICgpID0+IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgdHlwZV9mbikuY2FsbCh0aGlzLCBjaGFyKSxcbiAgICAgICAgY2hhcixcbiAgICAgICAgZGVsYXk6IGluc3RhbnQgfHwgaXNOb25Wb2lkRWxlbWVudChjaGFyKSA/IDAgOiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGdldFBhY2VfZm4pLmNhbGwodGhpcyksXG4gICAgICAgIHR5cGVhYmxlOiBjaGFyLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERVxuICAgICAgfTtcbiAgICB9KTtcbiAgICBsZXQgaXRlbXNUb1F1ZXVlID0gW1xuICAgICAgYm9va0VuZFF1ZXVlSXRlbXNbMF0sXG4gICAgICB7IGZ1bmM6IGFzeW5jICgpID0+IGF3YWl0IHRoaXMub3B0cy5iZWZvcmVTdHJpbmcoc3RyaW5nLCB0aGlzKSB9LFxuICAgICAgLi4uY2hhcnNBc1F1ZXVlSXRlbXMsXG4gICAgICB7IGZ1bmM6IGFzeW5jICgpID0+IGF3YWl0IHRoaXMub3B0cy5hZnRlclN0cmluZyhzdHJpbmcsIHRoaXMpIH0sXG4gICAgICBib29rRW5kUXVldWVJdGVtc1sxXVxuICAgIF07XG4gICAgcmV0dXJuIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgcXVldWVBbmRSZXR1cm5fZm4pLmNhbGwodGhpcywgaXRlbXNUb1F1ZXVlLCBhY3Rpb25PcHRzKTtcbiAgfVxuICBicmVhayhhY3Rpb25PcHRzID0ge30pIHtcbiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBxdWV1ZUFuZFJldHVybl9mbikuY2FsbCh0aGlzLCB7XG4gICAgICBmdW5jOiAoKSA9PiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHR5cGVfZm4pLmNhbGwodGhpcywgY3JlYXRlRWxlbWVudChcIkJSXCIpKSxcbiAgICAgIHR5cGVhYmxlOiB0cnVlXG4gICAgfSwgYWN0aW9uT3B0cyk7XG4gIH1cbiAgbW92ZShtb3ZlbWVudEFyZywgYWN0aW9uT3B0cyA9IHt9KSB7XG4gICAgbW92ZW1lbnRBcmcgPSBoYW5kbGVGdW5jdGlvbmFsQXJnKG1vdmVtZW50QXJnKTtcbiAgICBsZXQgYm9va0VuZFF1ZXVlSXRlbXMgPSBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGdlbmVyYXRlVGVtcG9yYXJ5T3B0aW9uUXVldWVJdGVtc19mbikuY2FsbCh0aGlzLCBhY3Rpb25PcHRzKTtcbiAgICBsZXQgeyBpbnN0YW50LCB0byB9ID0gYWN0aW9uT3B0cztcbiAgICBsZXQgbnVtYmVyT2ZTdGVwcyA9IGNvdW50U3RlcHNUb1NlbGVjdG9yKHtcbiAgICAgIHF1ZXVlSXRlbXM6IHRoaXMucXVldWUuZ2V0VHlwZWFibGUoKSxcbiAgICAgIHNlbGVjdG9yOiBtb3ZlbWVudEFyZyA9PT0gbnVsbCA/IFwiXCIgOiBtb3ZlbWVudEFyZyxcbiAgICAgIHRvLFxuICAgICAgY3Vyc29yUG9zaXRpb246IF9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZGVyaXZlZEN1cnNvclBvc2l0aW9uX2dldClcbiAgICB9KTtcbiAgICBsZXQgZGlyZWN0aW9uYWxTdGVwID0gbnVtYmVyT2ZTdGVwcyA8IDAgPyAtMSA6IDE7XG4gICAgdGhpcy5wcmVkaWN0ZWRDdXJzb3JQb3NpdGlvbiA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZGVyaXZlZEN1cnNvclBvc2l0aW9uX2dldCkgKyBudW1iZXJPZlN0ZXBzO1xuICAgIHJldHVybiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHF1ZXVlQW5kUmV0dXJuX2ZuKS5jYWxsKHRoaXMsIFtcbiAgICAgIGJvb2tFbmRRdWV1ZUl0ZW1zWzBdLFxuICAgICAgLi4uZHVwbGljYXRlKFxuICAgICAgICB7XG4gICAgICAgICAgZnVuYzogKCkgPT4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBtb3ZlX2ZuKS5jYWxsKHRoaXMsIGRpcmVjdGlvbmFsU3RlcCksXG4gICAgICAgICAgZGVsYXk6IGluc3RhbnQgPyAwIDogX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBnZXRQYWNlX2ZuKS5jYWxsKHRoaXMpLFxuICAgICAgICAgIGN1cnNvcmFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgTWF0aC5hYnMobnVtYmVyT2ZTdGVwcylcbiAgICAgICksXG4gICAgICBib29rRW5kUXVldWVJdGVtc1sxXVxuICAgIF0sIGFjdGlvbk9wdHMpO1xuICB9XG4gIGV4ZWMoZnVuYywgYWN0aW9uT3B0cyA9IHt9KSB7XG4gICAgbGV0IGJvb2tFbmRRdWV1ZUl0ZW1zID0gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBnZW5lcmF0ZVRlbXBvcmFyeU9wdGlvblF1ZXVlSXRlbXNfZm4pLmNhbGwodGhpcywgYWN0aW9uT3B0cyk7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgcXVldWVBbmRSZXR1cm5fZm4pLmNhbGwodGhpcywgW2Jvb2tFbmRRdWV1ZUl0ZW1zWzBdLCB7IGZ1bmM6ICgpID0+IGZ1bmModGhpcykgfSwgYm9va0VuZFF1ZXVlSXRlbXNbMV1dLCBhY3Rpb25PcHRzKTtcbiAgfVxuICBvcHRpb25zKG9wdHMsIGFjdGlvbk9wdHMgPSB7fSkge1xuICAgIG9wdHMgPSBoYW5kbGVGdW5jdGlvbmFsQXJnKG9wdHMpO1xuICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgdXBkYXRlT3B0aW9uc19mbikuY2FsbCh0aGlzLCBvcHRzKTtcbiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBxdWV1ZUFuZFJldHVybl9mbikuY2FsbCh0aGlzLCB7fSwgYWN0aW9uT3B0cyk7XG4gIH1cbiAgcGF1c2UobWlsbGlzZWNvbmRzLCBhY3Rpb25PcHRzID0ge30pIHtcbiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBxdWV1ZUFuZFJldHVybl9mbikuY2FsbCh0aGlzLCB7IGRlbGF5OiBoYW5kbGVGdW5jdGlvbmFsQXJnKG1pbGxpc2Vjb25kcykgfSwgYWN0aW9uT3B0cyk7XG4gIH1cbiAgZGVsZXRlKG51bUNoYXJhY3RlcnMgPSBudWxsLCBhY3Rpb25PcHRzID0ge30pIHtcbiAgICBudW1DaGFyYWN0ZXJzID0gaGFuZGxlRnVuY3Rpb25hbEFyZyhudW1DaGFyYWN0ZXJzKTtcbiAgICBsZXQgYm9va0VuZFF1ZXVlSXRlbXMgPSBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGdlbmVyYXRlVGVtcG9yYXJ5T3B0aW9uUXVldWVJdGVtc19mbikuY2FsbCh0aGlzLCBhY3Rpb25PcHRzKTtcbiAgICBsZXQgbnVtID0gbnVtQ2hhcmFjdGVycztcbiAgICBsZXQgeyBpbnN0YW50LCB0byB9ID0gYWN0aW9uT3B0cztcbiAgICBsZXQgdHlwZWFibGVRdWV1ZUl0ZW1zID0gdGhpcy5xdWV1ZS5nZXRUeXBlYWJsZSgpO1xuICAgIGxldCByb3VuZHMgPSAoKCkgPT4ge1xuICAgICAgaWYgKG51bSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdHlwZWFibGVRdWV1ZUl0ZW1zLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChpc051bWJlcihudW0pKSB7XG4gICAgICAgIHJldHVybiBudW07XG4gICAgICB9XG4gICAgICByZXR1cm4gY291bnRTdGVwc1RvU2VsZWN0b3Ioe1xuICAgICAgICBxdWV1ZUl0ZW1zOiB0eXBlYWJsZVF1ZXVlSXRlbXMsXG4gICAgICAgIHNlbGVjdG9yOiBudW0sXG4gICAgICAgIGN1cnNvclBvc2l0aW9uOiBfX3ByaXZhdGVHZXQodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGRlcml2ZWRDdXJzb3JQb3NpdGlvbl9nZXQpLFxuICAgICAgICB0b1xuICAgICAgfSk7XG4gICAgfSkoKTtcbiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBxdWV1ZUFuZFJldHVybl9mbikuY2FsbCh0aGlzLCBbXG4gICAgICBib29rRW5kUXVldWVJdGVtc1swXSxcbiAgICAgIC4uLmR1cGxpY2F0ZShcbiAgICAgICAge1xuICAgICAgICAgIGZ1bmM6IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZGVsZXRlX2ZuKS5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRlbGF5OiBpbnN0YW50ID8gMCA6IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZ2V0UGFjZV9mbikuY2FsbCh0aGlzLCAxKSxcbiAgICAgICAgICBkZWxldGFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcm91bmRzXG4gICAgICApLFxuICAgICAgYm9va0VuZFF1ZXVlSXRlbXNbMV1cbiAgICBdLCBhY3Rpb25PcHRzKTtcbiAgfVxuICBmcmVlemUoKSB7XG4gICAgdGhpcy5zdGF0dXNlcy5mcm96ZW4gPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBMaWtlIGAuZ28oKWAsIGJ1dCBtb3JlLi4uIFwib2ZmIHRoZSBncmlkLlwiXG4gICAqXG4gICAqIC0gd29uJ3QgdHJpZ2dlciBgYWZ0ZXJDb21wbGV0ZWAgY2FsbGJhY2tcbiAgICogLSBpdGVtcyB3b24ndCBiZSByZXBsYXllZCBhZnRlciBgLnJlc2V0KClgXG4gICAqXG4gICAqIFdoZW4gY2FsbGVkLCBhbGwgbm9uLWRvbmUgaXRlbXMgd2lsbCBiZSBcImZsdXNoZWRcIiAtLVxuICAgKiB0aGF0IGlzLCBleGVjdXRlZCwgYnV0IG5vdCByZW1lbWJlcmVkLlxuICAgKi9cbiAgZmx1c2goY2IgPSAoKSA9PiB7XG4gIH0pIHtcbiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGF0dGFjaEN1cnNvcl9mbikuY2FsbCh0aGlzKTtcbiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGZpcmVfZm4pLmNhbGwodGhpcywgZmFsc2UpLnRoZW4oY2IpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldFF1ZXVlKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlO1xuICB9XG4gIGdldE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0cztcbiAgfVxuICB1cGRhdGVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCB1cGRhdGVPcHRpb25zX2ZuKS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIGdldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxuICBlbXB0eShhY3Rpb25PcHRzID0ge30pIHtcbiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBxdWV1ZUFuZFJldHVybl9mbikuY2FsbCh0aGlzLCB7IGZ1bmM6IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZW1wdHlfZm4pLmJpbmQodGhpcykgfSwgYWN0aW9uT3B0cyk7XG4gIH1cbn0sIF9UeXBlSXRfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgZW1wdHlfZm4gPSBhc3luYyBmdW5jdGlvbigpIHtcbiAgaWYgKF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZWxlbWVudElzSW5wdXRfZm4pLmNhbGwodGhpcykpIHtcbiAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgIHJldHVybjtcbiAgfVxuICBfX3ByaXZhdGVHZXQodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGFsbENoYXJzX2dldCkuZm9yRWFjaChfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHJlbW92ZU5vZGVfZm4pLmJpbmQodGhpcykpO1xuICByZXR1cm47XG59LCBmaXJlX2ZuID0gYXN5bmMgZnVuY3Rpb24ocmVtZW1iZXIgPSB0cnVlKSB7XG4gIHRoaXMuc3RhdHVzZXMuc3RhcnRlZCA9IHRydWU7XG4gIGxldCBjbGVhblVwID0gKHFLZXkpID0+IHtcbiAgICB0aGlzLnF1ZXVlLmRvbmUocUtleSwgIXJlbWVtYmVyKTtcbiAgfTtcbiAgdHJ5IHtcbiAgICBsZXQgcXVldWVJdGVtcyA9IFsuLi50aGlzLnF1ZXVlLmdldFF1ZXVlKCldO1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBxdWV1ZUl0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IFtxdWV1ZUtleSwgcXVldWVJdGVtXSA9IHF1ZXVlSXRlbXNbaW5kZXhdO1xuICAgICAgaWYgKHF1ZXVlSXRlbS5kb25lKSBjb250aW51ZTtcbiAgICAgIGlmICghcXVldWVJdGVtLmRlbGV0YWJsZSB8fCBxdWV1ZUl0ZW0uZGVsZXRhYmxlICYmIF9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgYWxsQ2hhcnNfZ2V0KS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG5ld0luZGV4ID0gYXdhaXQgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBmaXJlSXRlbVdpdGhDb250ZXh0X2ZuKS5jYWxsKHRoaXMsIGluZGV4LCBxdWV1ZUl0ZW1zKTtcbiAgICAgICAgY2xlYW5VcFNraXBwZWQoe1xuICAgICAgICAgIGluZGV4LFxuICAgICAgICAgIG5ld0luZGV4LFxuICAgICAgICAgIHF1ZXVlSXRlbXMsXG4gICAgICAgICAgY2xlYW5VcFxuICAgICAgICB9KTtcbiAgICAgICAgaW5kZXggPSBuZXdJbmRleDtcbiAgICAgIH1cbiAgICAgIGNsZWFuVXAocXVldWVLZXkpO1xuICAgIH1cbiAgICBpZiAoIXJlbWVtYmVyKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNlcy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMub3B0cy5hZnRlckNvbXBsZXRlKHRoaXMpO1xuICAgIGlmICghdGhpcy5vcHRzLmxvb3ApIHtcbiAgICAgIHRocm93IFwiXCI7XG4gICAgfVxuICAgIGxldCBkZWxheSA9IHRoaXMub3B0cy5sb29wRGVsYXk7XG4gICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCB3YWl0X2ZuKS5jYWxsKHRoaXMsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgcHJlcExvb3BfZm4pLmNhbGwodGhpcywgZGVsYXlbMF0pO1xuICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBmaXJlX2ZuKS5jYWxsKHRoaXMpO1xuICAgIH0sIGRlbGF5WzFdKTtcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiB0aGlzO1xufSwgbW92ZV9mbiA9IGFzeW5jIGZ1bmN0aW9uKHN0ZXApIHtcbiAgdGhpcy5jdXJzb3JQb3NpdGlvbiA9IHVwZGF0ZUN1cnNvclBvc2l0aW9uKFxuICAgIHN0ZXAsXG4gICAgdGhpcy5jdXJzb3JQb3NpdGlvbixcbiAgICBfX3ByaXZhdGVHZXQodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGFsbENoYXJzX2dldClcbiAgKTtcbiAgcmVwb3NpdGlvbkN1cnNvcih0aGlzLmVsZW1lbnQsIF9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgYWxsQ2hhcnNfZ2V0KSwgdGhpcy5jdXJzb3JQb3NpdGlvbik7XG59LCBwcmVwTG9vcF9mbiA9IGFzeW5jIGZ1bmN0aW9uKGRlbGF5KSB7XG4gIGxldCBkZXJpdmVkQ3Vyc29yUG9zaXRpb24gPSBfX3ByaXZhdGVHZXQodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGRlcml2ZWRDdXJzb3JQb3NpdGlvbl9nZXQpO1xuICBkZXJpdmVkQ3Vyc29yUG9zaXRpb24gJiYgYXdhaXQgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBtb3ZlX2ZuKS5jYWxsKHRoaXMsIHsgdmFsdWU6IGRlcml2ZWRDdXJzb3JQb3NpdGlvbiB9KTtcbiAgbGV0IHF1ZXVlSXRlbXMgPSBfX3ByaXZhdGVHZXQodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGFsbENoYXJzX2dldCkubWFwKChjKSA9PiB7XG4gICAgcmV0dXJuIFtcbiAgICAgIFN5bWJvbCgpLFxuICAgICAge1xuICAgICAgICBmdW5jOiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGRlbGV0ZV9mbikuYmluZCh0aGlzKSxcbiAgICAgICAgZGVsYXk6IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZ2V0UGFjZV9mbikuY2FsbCh0aGlzLCAxKSxcbiAgICAgICAgZGVsZXRhYmxlOiB0cnVlLFxuICAgICAgICBzaG91bGRQYXVzZUN1cnNvcjogKCkgPT4gdHJ1ZVxuICAgICAgfVxuICAgIF07XG4gIH0pO1xuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcXVldWVJdGVtcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBhd2FpdCBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGZpcmVJdGVtV2l0aENvbnRleHRfZm4pLmNhbGwodGhpcywgaW5kZXgsIHF1ZXVlSXRlbXMpO1xuICB9XG4gIHRoaXMucXVldWUucmVzZXQoKTtcbiAgdGhpcy5xdWV1ZS5zZXQoMCwgeyBkZWxheSB9KTtcbn0sIGZpcmVJdGVtV2l0aENvbnRleHRfZm4gPSBmdW5jdGlvbihpbmRleCwgcXVldWVJdGVtcykge1xuICByZXR1cm4gZmlyZUl0ZW0oe1xuICAgIGluZGV4LFxuICAgIHF1ZXVlSXRlbXMsXG4gICAgd2FpdDogX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCB3YWl0X2ZuKS5iaW5kKHRoaXMpLFxuICAgIGN1cnNvcjogdGhpcy5jdXJzb3IsXG4gICAgY3Vyc29yT3B0aW9uczogdGhpcy5vcHRzLmN1cnNvclxuICB9KTtcbn0sIHdhaXRfZm4gPSBhc3luYyBmdW5jdGlvbihjYWxsYmFjaywgZGVsYXksIHNpbGVudCA9IGZhbHNlKSB7XG4gIGlmICh0aGlzLnN0YXR1c2VzLmZyb3plbikge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLnVuZnJlZXplID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnN0YXR1c2VzLmZyb3plbiA9IGZhbHNlO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIHNpbGVudCB8fCBhd2FpdCB0aGlzLm9wdHMuYmVmb3JlU3RlcCh0aGlzKTtcbiAgYXdhaXQgd2FpdChjYWxsYmFjaywgZGVsYXksIHRoaXMudGltZW91dHMpO1xuICBzaWxlbnQgfHwgYXdhaXQgdGhpcy5vcHRzLmFmdGVyU3RlcCh0aGlzKTtcbn0sIGF0dGFjaEN1cnNvcl9mbiA9IGFzeW5jIGZ1bmN0aW9uKCkge1xuICAhX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBlbGVtZW50SXNJbnB1dF9mbikuY2FsbCh0aGlzKSAmJiB0aGlzLmN1cnNvciAmJiB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jdXJzb3IpO1xuICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBzaG91bGRSZW5kZXJDdXJzb3JfZ2V0KSkge1xuICAgIHNldEN1cnNvclN0eWxlcyh0aGlzLmlkLCB0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMuY3Vyc29yLmRhdGFzZXQudGlBbmltYXRpb25JZCA9IHRoaXMuaWQ7XG4gICAgbGV0IHsgYW5pbWF0aW9uIH0gPSB0aGlzLm9wdHMuY3Vyc29yO1xuICAgIGxldCB7IGZyYW1lcywgb3B0aW9ucyB9ID0gYW5pbWF0aW9uO1xuICAgIHNldEN1cnNvckFuaW1hdGlvbih7XG4gICAgICBmcmFtZXMsXG4gICAgICBjdXJzb3I6IHRoaXMuY3Vyc29yLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRzLmN1cnNvclNwZWVkLFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0sIGVsZW1lbnRJc0lucHV0X2ZuID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBpc0lucHV0KHRoaXMuZWxlbWVudCk7XG59LCBxdWV1ZUFuZFJldHVybl9mbiA9IGZ1bmN0aW9uKHN0ZXBzLCBvcHRzKSB7XG4gIHRoaXMucXVldWUuYWRkKHN0ZXBzKTtcbiAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBtYXliZUFwcGVuZFBhdXNlX2ZuKS5jYWxsKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gdGhpcztcbn0sIG1heWJlQXBwZW5kUGF1c2VfZm4gPSBmdW5jdGlvbihvcHRzID0ge30pIHtcbiAgbGV0IGRlbGF5ID0gb3B0cy5kZWxheTtcbiAgZGVsYXkgJiYgdGhpcy5xdWV1ZS5hZGQoeyBkZWxheSB9KTtcbn0sIGdlbmVyYXRlVGVtcG9yYXJ5T3B0aW9uUXVldWVJdGVtc19mbiA9IGZ1bmN0aW9uKG5ld09wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gW1xuICAgIHsgZnVuYzogKCkgPT4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCB1cGRhdGVPcHRpb25zX2ZuKS5jYWxsKHRoaXMsIG5ld09wdGlvbnMpIH0sXG4gICAgeyBmdW5jOiAoKSA9PiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHVwZGF0ZU9wdGlvbnNfZm4pLmNhbGwodGhpcywgdGhpcy5vcHRzKSB9XG4gIF07XG59LCB1cGRhdGVPcHRpb25zX2ZuID0gYXN5bmMgZnVuY3Rpb24ob3B0cykge1xuICB0aGlzLm9wdHMgPSBtZXJnZSh0aGlzLm9wdHMsIG9wdHMpO1xufSwgLyoqXG4gKiBCYXNlZCBvbiBwcm92aWRlZCBzdHJpbmdzLCBnZW5lcmF0ZSBhIFR5cGVJdCBxdWV1ZVxuICogdG8gYmUgZmlyZWQgZm9yIGVhY2ggY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcuXG4gKi9cbmdlbmVyYXRlUXVldWVfZm4gPSBmdW5jdGlvbigpIHtcbiAgbGV0IHN0cmluZ3MgPSB0aGlzLm9wdHMuc3RyaW5ncy5maWx0ZXIoKHN0cmluZykgPT4gISFzdHJpbmcpO1xuICBzdHJpbmdzLmZvckVhY2goKHN0cmluZywgaW5kZXgpID0+IHtcbiAgICB0aGlzLnR5cGUoc3RyaW5nKTtcbiAgICBpZiAoaW5kZXggKyAxID09PSBzdHJpbmdzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgc3BsaXRJdGVtcyA9IHRoaXMub3B0cy5icmVha0xpbmVzID8gW3sgZnVuYzogKCkgPT4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCB0eXBlX2ZuKS5jYWxsKHRoaXMsIGNyZWF0ZUVsZW1lbnQoXCJCUlwiKSksIHR5cGVhYmxlOiB0cnVlIH1dIDogZHVwbGljYXRlKFxuICAgICAge1xuICAgICAgICBmdW5jOiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGRlbGV0ZV9mbikuYmluZCh0aGlzKSxcbiAgICAgICAgZGVsYXk6IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZ2V0UGFjZV9mbikuY2FsbCh0aGlzLCAxKVxuICAgICAgfSxcbiAgICAgIHRoaXMucXVldWUuZ2V0VHlwZWFibGUoKS5sZW5ndGhcbiAgICApO1xuICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgYWRkU3BsaXRQYXVzZV9mbikuY2FsbCh0aGlzLCBzcGxpdEl0ZW1zKTtcbiAgfSk7XG59LCBfYnVpbGRPcHRpb25zID0gbmV3IFdlYWtNYXAoKSwgcHJlcGVuZEhhcmRjb2RlZFN0cmluZ3NfZm4gPSBmdW5jdGlvbihzdHJpbmdzKSB7XG4gIGxldCBleGlzdGluZ01hcmt1cCA9IHRoaXMuZWxlbWVudC5pbm5lckhUTUw7XG4gIGlmICghZXhpc3RpbmdNYXJrdXApIHtcbiAgICByZXR1cm4gc3RyaW5ncztcbiAgfVxuICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgaWYgKHRoaXMub3B0cy5zdGFydERlbGV0ZSkge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBleGlzdGluZ01hcmt1cDtcbiAgICBleHBhbmRUZXh0Tm9kZXModGhpcy5lbGVtZW50KTtcbiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGFkZFNwbGl0UGF1c2VfZm4pLmNhbGwodGhpcywgZHVwbGljYXRlKFxuICAgICAge1xuICAgICAgICBmdW5jOiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIGRlbGV0ZV9mbikuYmluZCh0aGlzKSxcbiAgICAgICAgZGVsYXk6IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgZ2V0UGFjZV9mbikuY2FsbCh0aGlzLCAxKSxcbiAgICAgICAgZGVsZXRhYmxlOiB0cnVlXG4gICAgICB9LFxuICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBhbGxDaGFyc19nZXQpLmxlbmd0aFxuICAgICkpO1xuICAgIHJldHVybiBzdHJpbmdzO1xuICB9XG4gIHJldHVybiBzcGxpdE9uQnJlYWsoZXhpc3RpbmdNYXJrdXApLmNvbmNhdChzdHJpbmdzKTtcbn0sIC8qKlxuICogUHJvdmlkZWQgaXQncyBhIG5vbi1mb3JtIGVsZW1lbnQgYW5kIHRoZSBvcHRpb25zIGlzIHByb3ZpZGVkLFxuICogc2V0IHVwIHRoZSBjdXJzb3IgZWxlbWVudCBmb3IgdGhlIGFuaW1hdGlvbi5cbiAqL1xuc2V0VXBDdXJzb3JfZm4gPSBmdW5jdGlvbigpIHtcbiAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgaXNJbnB1dF9nZXQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IGN1cnNvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICBjdXJzb3IuY2xhc3NOYW1lID0gQ1VSU09SX0NMQVNTO1xuICBpZiAoIV9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgc2hvdWxkUmVuZGVyQ3Vyc29yX2dldCkpIHtcbiAgICBjdXJzb3Iuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgcmV0dXJuIGN1cnNvcjtcbiAgfVxuICBjdXJzb3IuaW5uZXJIVE1MID0gZ2V0UGFyc2VkQm9keSh0aGlzLm9wdHMuY3Vyc29yQ2hhcikuaW5uZXJIVE1MO1xuICByZXR1cm4gY3Vyc29yO1xufSwgYWRkU3BsaXRQYXVzZV9mbiA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gIGxldCBkZWxheSA9IHRoaXMub3B0cy5uZXh0U3RyaW5nRGVsYXk7XG4gIHRoaXMucXVldWUuYWRkKFt7IGRlbGF5OiBkZWxheVswXSB9LCAuLi5pdGVtcywgeyBkZWxheTogZGVsYXlbMV0gfV0pO1xufSwgdHlwZV9mbiA9IGZ1bmN0aW9uKGNoYXIpIHtcbiAgaW5zZXJ0SW50b0VsZW1lbnQodGhpcy5lbGVtZW50LCBjaGFyKTtcbn0sIGRlbGV0ZV9mbiA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIV9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgYWxsQ2hhcnNfZ2V0KS5sZW5ndGgpIHJldHVybjtcbiAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgaXNJbnB1dF9nZXQpKSB7XG4gICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdGhpcy5lbGVtZW50LnZhbHVlLnNsaWNlKDAsIC0xKTtcbiAgfSBlbHNlIHtcbiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1R5cGVJdF9pbnN0YW5jZXMsIHJlbW92ZU5vZGVfZm4pLmNhbGwodGhpcywgX19wcml2YXRlR2V0KHRoaXMsIF9UeXBlSXRfaW5zdGFuY2VzLCBhbGxDaGFyc19nZXQpW3RoaXMuY3Vyc29yUG9zaXRpb25dKTtcbiAgfVxufSwgcmVtb3ZlTm9kZV9mbiA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmVtb3ZlTm9kZShub2RlLCB0aGlzLmVsZW1lbnQpO1xufSwgZ2V0UGFjZV9mbiA9IGZ1bmN0aW9uKGluZGV4ID0gMCkge1xuICByZXR1cm4gY2FsY3VsYXRlUGFjZSh0aGlzLm9wdHMpW2luZGV4XTtcbn0sIGRlcml2ZWRDdXJzb3JQb3NpdGlvbl9nZXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMucHJlZGljdGVkQ3Vyc29yUG9zaXRpb24gPz8gdGhpcy5jdXJzb3JQb3NpdGlvbjtcbn0sIGlzSW5wdXRfZ2V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBpc0lucHV0KHRoaXMuZWxlbWVudCk7XG59LCBzaG91bGRSZW5kZXJDdXJzb3JfZ2V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAhIXRoaXMub3B0cy5jdXJzb3IgJiYgIV9fcHJpdmF0ZUdldCh0aGlzLCBfVHlwZUl0X2luc3RhbmNlcywgaXNJbnB1dF9nZXQpO1xufSwgYWxsQ2hhcnNfZ2V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRBbGxDaGFycyh0aGlzLmVsZW1lbnQpO1xufSwgX2EpO1xuY29uc3QgRHluYW1pY0VsZW1lbnRDb21wb25lbnQgPSBmb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHsgYXM6IEFzIH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KEFzLCB7IHJlZiwgLi4ucHJvcHMgfSk7XG59KTtcbmNvbnN0IGRlZmF1bHRQcm9wT3B0aW9ucyA9IHt9O1xuY29uc3QgVHlwZUl0ID0gKHtcbiAgYXMgPSBcInNwYW5cIixcbiAgb3B0aW9ucyA9IGRlZmF1bHRQcm9wT3B0aW9ucyxcbiAgY2hpbGRyZW4gPSBudWxsLFxuICBnZXRCZWZvcmVJbml0ID0gKGluc3RhbmNlKSA9PiBpbnN0YW5jZSxcbiAgZ2V0QWZ0ZXJJbml0ID0gKGluc3RhbmNlKSA9PiBpbnN0YW5jZSxcbiAgLi4ucmVtYWluaW5nUHJvcHNcbn0pID0+IHtcbiAgY29uc3QgZWxlbWVudFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgaW5zdGFuY2VSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtzaG91bGRTaG93Q2hpbGRyZW4sIHNldFNob3VsZFNob3dDaGlsZHJlbl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2luc3RhbmNlT3B0aW9ucywgc2V0SW5zdGFuY2VPcHRpb25zXSA9IHVzZVN0YXRlKG51bGwpO1xuICBmdW5jdGlvbiBjYWxjdWxhdGVPcHRpb25zKCkge1xuICAgIGNvbnN0IG9wdGlvbnNDbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGlmIChjaGlsZHJlbiAmJiBlbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIG9wdGlvbnNDbG9uZS5zdHJpbmdzID0gZWxlbWVudFJlZi5jdXJyZW50LmlubmVySFRNTDtcbiAgICB9XG4gICAgc2V0SW5zdGFuY2VPcHRpb25zKG9wdGlvbnNDbG9uZSk7XG4gIH1cbiAgZnVuY3Rpb24gZ2VuZXJhdGVOZXdJbnN0YW5jZSgpIHtcbiAgICBpbnN0YW5jZVJlZi5jdXJyZW50ID0gbmV3IFR5cGVJdCQxKGVsZW1lbnRSZWYuY3VycmVudCwgaW5zdGFuY2VPcHRpb25zKTtcbiAgICBpbnN0YW5jZVJlZi5jdXJyZW50ID0gZ2V0QmVmb3JlSW5pdChpbnN0YW5jZVJlZi5jdXJyZW50KTtcbiAgICBpbnN0YW5jZVJlZi5jdXJyZW50LmdvKCk7XG4gICAgaW5zdGFuY2VSZWYuY3VycmVudCA9IGdldEFmdGVySW5pdChpbnN0YW5jZVJlZi5jdXJyZW50KTtcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNhbGN1bGF0ZU9wdGlvbnMoKTtcbiAgICBzZXRTaG91bGRTaG93Q2hpbGRyZW4oZmFsc2UpO1xuICB9LCBbb3B0aW9uc10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKCFpbnN0YW5jZU9wdGlvbnMpIHJldHVybjtcbiAgICAoKF9hMiA9IGluc3RhbmNlUmVmLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTIudXBkYXRlT3B0aW9ucyhpbnN0YW5jZU9wdGlvbnMpKSB8fCBnZW5lcmF0ZU5ld0luc3RhbmNlKCk7XG4gIH0sIFtpbnN0YW5jZU9wdGlvbnNdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoX2EyID0gaW5zdGFuY2VSZWYuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5kZXN0cm95KCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgRHluYW1pY0VsZW1lbnRDb21wb25lbnQsXG4gICAge1xuICAgICAgcmVmOiBlbGVtZW50UmVmLFxuICAgICAgYXMsXG4gICAgICBjaGlsZHJlbjogc2hvdWxkU2hvd0NoaWxkcmVuID8gY2hpbGRyZW4gOiBudWxsLFxuICAgICAgc3R5bGU6IHsgb3BhY2l0eTogc2hvdWxkU2hvd0NoaWxkcmVuID8gMCA6IDEgfSxcbiAgICAgIC4uLnJlbWFpbmluZ1Byb3BzXG4gICAgfVxuICApO1xufTtcbmV4cG9ydCB7XG4gIFR5cGVJdCBhcyBkZWZhdWx0XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/typeit-react/dist/index.es.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/ChatBot.tsx":
/*!************************************!*\
  !*** ./src/components/ChatBot.tsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_ui_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/dialog */ \"(app-pages-browser)/./src/components/ui/dialog.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Send_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Send!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Send_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Send!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./src/components/ui/input.tsx\");\n/* harmony import */ var _components_ui_label__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/label */ \"(app-pages-browser)/./src/components/ui/label.tsx\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./src/components/ui/card.tsx\");\n/* harmony import */ var typeit_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! typeit-react */ \"(app-pages-browser)/./node_modules/typeit-react/dist/index.es.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\nasync function getAiResponse() {\n    let myText = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"hello\";\n    try {\n        const resp = await fetch(\"/api/bot\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                prompt: myText\n            })\n        });\n        const data = await resp.json();\n        return data.AnnuarAi || null;\n    } catch (err) {\n        console.log(err);\n        return null;\n    }\n}\nfunction formatResponse(response) {\n    let formatted = response.replace(/\\n/g, \"<br>\");\n    formatted = formatted.replace(/\\*\\*(.*?)\\*\\*/g, (_, p1)=>\"<b>\".concat(p1.toUpperCase(), \"</b>\"));\n    return formatted;\n}\nfunction formatTimeAgo(timestamp) {\n    const now = new Date();\n    const elapsedSeconds = Math.floor((now.getTime() - timestamp.getTime()) / 1000);\n    if (elapsedSeconds < 60) return \"\".concat(elapsedSeconds, \" sec ago\");\n    const elapsedMinutes = Math.floor(elapsedSeconds / 60);\n    if (elapsedMinutes < 60) return \"\".concat(elapsedMinutes, \" min ago\");\n    const elapsedHours = Math.floor(elapsedMinutes / 60);\n    if (elapsedHours < 24) return \"\".concat(elapsedHours, \" hr ago\");\n    const elapsedDays = Math.floor(elapsedHours / 24);\n    return \"\".concat(elapsedDays, \" day\").concat(elapsedDays > 1 ? \"s\" : \"\", \" ago\");\n}\nconst ChatDialog = (param)=>{\n    let { isOpen, onClose } = param;\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom();\n    }, [\n        messages\n    ]);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        const form = e.currentTarget;\n        const messageInput = form.elements.namedItem(\"message\").value.trim();\n        if (messageInput === \"\") return;\n        const timestamp = new Date();\n        setMessages((prevMessages)=>[\n                ...prevMessages,\n                {\n                    text: messageInput,\n                    type: \"user\",\n                    timestamp\n                }\n            ]);\n        form.elements.namedItem(\"message\").value = \"\";\n        setIsLoading(true);\n        const aiResponse = await getAiResponse(messageInput);\n        setIsLoading(false);\n        if (aiResponse) {\n            const formattedResponse = formatResponse(aiResponse);\n            setMessages((prevMessages)=>[\n                    ...prevMessages,\n                    {\n                        text: formattedResponse,\n                        type: \"ai\",\n                        timestamp: new Date()\n                    }\n                ]);\n        }\n        form.elements.namedItem(\"message\").value = \"\";\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_2__.Dialog, {\n        open: isOpen,\n        onOpenChange: onClose,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_2__.DialogContent, {\n            className: \"md:p-4 py-4 px-3 h-full md:max-h-[75vh]  z-[9999] flex flex-col\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_2__.DialogHeader, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_2__.DialogTitle, {\n                            children: \"Chat with Annuar Ai\"\n                        }, void 0, false, {\n                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                            lineNumber: 107,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_dialog__WEBPACK_IMPORTED_MODULE_2__.DialogClose, {}, void 0, false, {\n                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                            lineNumber: 108,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                    lineNumber: 106,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col flex-1 gap-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                            className: \"no-scrollbar flex-1 overflow-y-auto  p-3 md:max-h-[50vh] max-h-[73vh]\",\n                            children: [\n                                messages.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"bg-gray-400/20 rounded-full p-3 m-auto absolute top-1/2 left-1/2 -translate-x-1/2 w-max\",\n                                    children: \"Enter prompt to talk to Annuar Ai\"\n                                }, void 0, false, {\n                                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                    lineNumber: 113,\n                                    columnNumber: 15\n                                }, undefined),\n                                messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex \".concat(message.type === \"ai\" ? \"justify-start\" : \"justify-end\", \" mb-4\"),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"max-w-[90%] flex flex-col \".concat(message.type === \"ai\" ? \"items-start\" : \"items-end\"),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"px-4 py-3 rounded-lg \".concat(message.type === \"ai\" ? \"text-black dark:text-white bg-muted shadow-md\" : \"bg-zinc-800 text-white shadow-md\"),\n                                                    children: message.type === \"ai\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(typeit_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                        options: {\n                                                            speed: 50,\n                                                            waitUntilVisible: true\n                                                        },\n                                                        children: message.text\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                                        lineNumber: 130,\n                                                        columnNumber: 23\n                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        dangerouslySetInnerHTML: {\n                                                            __html: message.text\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                                        lineNumber: 139,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                                    lineNumber: 123,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs text-gray-500 mt-1\",\n                                                    children: formatTimeAgo(message.timestamp)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                                    lineNumber: 142,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                            lineNumber: 122,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, index, false, {\n                                        fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                        lineNumber: 118,\n                                        columnNumber: 15\n                                    }, undefined)),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    ref: messagesEndRef\n                                }, void 0, false, {\n                                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                    lineNumber: 148,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                            lineNumber: 111,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                            onSubmit: handleSubmit,\n                            className: \"pt-2 mt-auto relative overflow-hidden rounded-lg border focus-within:ring-1 focus-within:ring-ring\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_label__WEBPACK_IMPORTED_MODULE_5__.Label, {\n                                    htmlFor: \"message\",\n                                    className: \"sr-only\",\n                                    children: \"Message\"\n                                }, void 0, false, {\n                                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                    lineNumber: 154,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center pt-0 px-2 py-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                            required: true,\n                                            id: \"message\",\n                                            name: \"message\",\n                                            placeholder: \"Type your message here...\",\n                                            className: \"focus-visible:border-0 focus-visible:outline-0 resize-none border-0 shadow-none focus-visible:ring-0 flex-grow\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                            lineNumber: 158,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                            type: \"submit\",\n                                            size: \"sm\",\n                                            className: \"ml-2 gap-1.5 min-w-10 h-10\",\n                                            disabled: isLoading,\n                                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Send_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                className: \"text-2xl animate-spin\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                                lineNumber: 171,\n                                                columnNumber: 30\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Send_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {}, void 0, false, {\n                                                fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                                lineNumber: 171,\n                                                columnNumber: 78\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                            lineNumber: 165,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                                    lineNumber: 157,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                            lineNumber: 150,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                    lineNumber: 110,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"small\", {\n                    className: \"text-xs text-gray-400\",\n                    children: \"Messages are generated by AI and may be inaccurate or inappropriate\"\n                }, void 0, false, {\n                    fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n                    lineNumber: 176,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n            lineNumber: 105,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/home/ramo/Desktop/portfolio/myportfolio/src/components/ChatBot.tsx\",\n        lineNumber: 104,\n        columnNumber: 5\n    }, undefined);\n};\n_s(ChatDialog, \"oB5mluyB22AKtEGxVJYRLrDd3EQ=\");\n_c = ChatDialog;\n/* harmony default export */ __webpack_exports__[\"default\"] = (ChatDialog);\nvar _c;\n$RefreshReg$(_c, \"ChatDialog\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXRCb3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQ3NFO0FBQ2lDO0FBQ3ZEO0FBQ0g7QUFDQztBQUNBO0FBQ0Y7QUFDVjtBQWFsQyxlQUFlZ0I7UUFBY0MsU0FBQUEsaUVBQWlCO0lBQzVDLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1DLE1BQU0sWUFBWTtZQUNuQ0MsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtZQUNsQjtZQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQUVDLFFBQVFSO1lBQU87UUFDeEM7UUFDQSxNQUFNUyxPQUFPLE1BQU1SLEtBQUtTLElBQUk7UUFDNUIsT0FBT0QsS0FBS0UsUUFBUSxJQUFJO0lBQzFCLEVBQUUsT0FBT0MsS0FBSztRQUNaQyxRQUFRQyxHQUFHLENBQUNGO1FBQ1osT0FBTztJQUNUO0FBQ0Y7QUFFQSxTQUFTRyxlQUFlQyxRQUFnQjtJQUN0QyxJQUFJQyxZQUFZRCxTQUFTRSxPQUFPLENBQUMsT0FBTztJQUN4Q0QsWUFBWUEsVUFBVUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDQyxHQUFHQyxLQUFPLE1BQXVCLE9BQWpCQSxHQUFHQyxXQUFXLElBQUc7SUFDbEYsT0FBT0o7QUFDVDtBQUVBLFNBQVNLLGNBQWNDLFNBQWU7SUFDcEMsTUFBTUMsTUFBTSxJQUFJQztJQUNoQixNQUFNQyxpQkFBaUJDLEtBQUtDLEtBQUssQ0FBQyxDQUFDSixJQUFJSyxPQUFPLEtBQUtOLFVBQVVNLE9BQU8sRUFBQyxJQUFLO0lBRTFFLElBQUlILGlCQUFpQixJQUFJLE9BQU8sR0FBa0IsT0FBZkEsZ0JBQWU7SUFDbEQsTUFBTUksaUJBQWlCSCxLQUFLQyxLQUFLLENBQUNGLGlCQUFpQjtJQUNuRCxJQUFJSSxpQkFBaUIsSUFBSSxPQUFPLEdBQWtCLE9BQWZBLGdCQUFlO0lBQ2xELE1BQU1DLGVBQWVKLEtBQUtDLEtBQUssQ0FBQ0UsaUJBQWlC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OERBQUNPO29EQUFJRCxXQUFVOzhEQUNaeEMsY0FBYzZDLFFBQVE1QyxTQUFTOzs7Ozs7Ozs7Ozs7dUNBeEIvQjZDOzs7Ozs4Q0E2QlQsOERBQUNMO29DQUFJVyxLQUFLbEM7Ozs7Ozs7Ozs7OztzQ0FFWiw4REFBQ1E7NEJBQ0MyQixVQUFVOUI7NEJBQ1ZpQixXQUFVOzs4Q0FFViw4REFBQ2xFLHVEQUFLQTtvQ0FBQ2dGLFNBQVE7b0NBQVVkLFdBQVU7OENBQVU7Ozs7Ozs4Q0FHN0MsOERBQUNDO29DQUFJRCxXQUFVOztzREFDYiw4REFBQ25FLHVEQUFLQTs0Q0FDSmtGLFFBQVE7NENBQ1JDLElBQUc7NENBQ0hDLE1BQUs7NENBQ0xDLGFBQVk7NENBQ1psQixXQUFVOzs7Ozs7c0RBRVosOERBQUN0RSx5REFBTUE7NENBQ0xpRSxNQUFLOzRDQUNMd0IsTUFBSzs0Q0FDTG5CLFdBQVU7NENBQ1ZvQixVQUFVNUM7c0RBRVRBLDBCQUFZLDhEQUFDN0Msd0ZBQU9BO2dEQUFDcUUsV0FBVTs7Ozs7MEVBQTZCLDhEQUFDcEUsd0ZBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQUsxRSw4REFBQ3lGO29CQUFNckIsV0FBVTs4QkFBd0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSWpEO0dBMUhNN0I7S0FBQUE7QUE0SE4sK0RBQWVBLFVBQVVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbXBvbmVudHMvQ2hhdEJvdC50c3g/ZWRhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIEZvcm1FdmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IERpYWxvZywgRGlhbG9nQ29udGVudCwgRGlhbG9nSGVhZGVyLCBEaWFsb2dUaXRsZSwgRGlhbG9nQ2xvc2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZGlhbG9nJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgTG9hZGVyMiwgU2VuZCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9pbnB1dCc7XG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9sYWJlbCc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IFR5cGVJdCBmcm9tICd0eXBlaXQtcmVhY3QnO1xuXG5pbnRlcmZhY2UgQ2hhdERpYWxvZ1Byb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIHRleHQ6IHN0cmluZztcbiAgdHlwZTogJ3VzZXInIHwgJ2FpJztcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRBaVJlc3BvbnNlKG15VGV4dDogc3RyaW5nID0gJ2hlbGxvJyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCgnL2FwaS9ib3QnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHByb21wdDogbXlUZXh0IH0pLFxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YS5Bbm51YXJBaSB8fCBudWxsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgZm9ybWF0dGVkID0gcmVzcG9uc2UucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAoXywgcDEpID0+IGA8Yj4ke3AxLnRvVXBwZXJDYXNlKCl9PC9iPmApO1xuICByZXR1cm4gZm9ybWF0dGVkO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lQWdvKHRpbWVzdGFtcDogRGF0ZSk6IHN0cmluZyB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGVsYXBzZWRTZWNvbmRzID0gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIHRpbWVzdGFtcC5nZXRUaW1lKCkpIC8gMTAwMCk7XG5cbiAgaWYgKGVsYXBzZWRTZWNvbmRzIDwgNjApIHJldHVybiBgJHtlbGFwc2VkU2Vjb25kc30gc2VjIGFnb2A7XG4gIGNvbnN0IGVsYXBzZWRNaW51dGVzID0gTWF0aC5mbG9vcihlbGFwc2VkU2Vjb25kcyAvIDYwKTtcbiAgaWYgKGVsYXBzZWRNaW51dGVzIDwgNjApIHJldHVybiBgJHtlbGFwc2VkTWludXRlc30gbWluIGFnb2A7XG4gIGNvbnN0IGVsYXBzZWRIb3VycyA9IE1hdGguZmxvb3IoZWxhcHNlZE1pbnV0ZXMgLyA2MCk7XG4gIGlmIChlbGFwc2VkSG91cnMgPCAyNCkgcmV0dXJuIGAke2VsYXBzZWRIb3Vyc30gaHIgYWdvYDtcbiAgY29uc3QgZWxhcHNlZERheXMgPSBNYXRoLmZsb29yKGVsYXBzZWRIb3VycyAvIDI0KTtcbiAgcmV0dXJuIGAke2VsYXBzZWREYXlzfSBkYXkke2VsYXBzZWREYXlzID4gMSA/ICdzJyA6ICcnfSBhZ29gO1xufVxuXG5jb25zdCBDaGF0RGlhbG9nOiBSZWFjdC5GQzxDaGF0RGlhbG9nUHJvcHM+ID0gKHsgaXNPcGVuLCBvbkNsb3NlIH0pID0+IHtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBGb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50PikgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IG1lc3NhZ2VJbnB1dCA9IChmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbSgnbWVzc2FnZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLnRyaW0oKTtcbiAgICBpZiAobWVzc2FnZUlucHV0ID09PSAnJykgcmV0dXJuO1xuXG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKTtcblxuICAgIHNldE1lc3NhZ2VzKChwcmV2TWVzc2FnZXMpID0+IFtcbiAgICAgIC4uLnByZXZNZXNzYWdlcyxcbiAgICAgIHsgdGV4dDogbWVzc2FnZUlucHV0LCB0eXBlOiAndXNlcicsIHRpbWVzdGFtcCB9LFxuICAgIF0pO1xuICAgIChmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbSgnbWVzc2FnZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gXCJcIjtcblxuICAgIHNldElzTG9hZGluZyh0cnVlKTtcblxuICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBhd2FpdCBnZXRBaVJlc3BvbnNlKG1lc3NhZ2VJbnB1dCk7XG5cbiAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuXG4gICAgaWYgKGFpUmVzcG9uc2UpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFJlc3BvbnNlID0gZm9ybWF0UmVzcG9uc2UoYWlSZXNwb25zZSk7XG5cbiAgICAgIHNldE1lc3NhZ2VzKChwcmV2TWVzc2FnZXMpID0+IFtcbiAgICAgICAgLi4ucHJldk1lc3NhZ2VzLFxuICAgICAgICB7IHRleHQ6IGZvcm1hdHRlZFJlc3BvbnNlLCB0eXBlOiAnYWknLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIChmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbSgnbWVzc2FnZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gJyc7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8RGlhbG9nIG9wZW49e2lzT3Blbn0gb25PcGVuQ2hhbmdlPXtvbkNsb3NlfT5cbiAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT1cIm1kOnAtNCBweS00IHB4LTMgaC1mdWxsIG1kOm1heC1oLVs3NXZoXSAgei1bOTk5OV0gZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgIDxEaWFsb2dUaXRsZT5DaGF0IHdpdGggQW5udWFyIEFpPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICA8RGlhbG9nQ2xvc2UgLz5cbiAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBmbGV4LTEgZ2FwLTNcIj5cbiAgICAgICAgICA8Q2FyZCBjbGFzc05hbWU9XCJuby1zY3JvbGxiYXIgZmxleC0xIG92ZXJmbG93LXktYXV0byAgcC0zIG1kOm1heC1oLVs1MHZoXSBtYXgtaC1bNzN2aF1cIj5cbiAgICAgICAgICAgIHttZXNzYWdlcy5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJiZy1ncmF5LTQwMC8yMCByb3VuZGVkLWZ1bGwgcC0zIG0tYXV0byBhYnNvbHV0ZSB0b3AtMS8yIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgdy1tYXhcIj5cbiAgICAgICAgICAgICAgICBFbnRlciBwcm9tcHQgdG8gdGFsayB0byBBbm51YXIgQWlcbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHttZXNzYWdlLnR5cGUgPT09ICdhaScgPyAnanVzdGlmeS1zdGFydCcgOiAnanVzdGlmeS1lbmQnfSBtYi00YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbWF4LXctWzkwJV0gZmxleCBmbGV4LWNvbCAke21lc3NhZ2UudHlwZSA9PT0gJ2FpJyA/ICdpdGVtcy1zdGFydCcgOiAnaXRlbXMtZW5kJ31gfT5cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtNCBweS0zIHJvdW5kZWQtbGcgJHttZXNzYWdlLnR5cGUgPT09ICdhaSdcbiAgICAgICAgICAgICAgICAgICAgICA/ICd0ZXh0LWJsYWNrIGRhcms6dGV4dC13aGl0ZSBiZy1tdXRlZCBzaGFkb3ctbWQnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnYmctemluYy04MDAgdGV4dC13aGl0ZSBzaGFkb3ctbWQnXG4gICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnR5cGUgPT09ICdhaScgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPFR5cGVJdFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogNTAsIC8vIEFkanVzdCB0eXBpbmcgc3BlZWQgYXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRVbnRpbFZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9UeXBlSXQ+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBtZXNzYWdlLnRleHQgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZUFnbyhtZXNzYWdlLnRpbWVzdGFtcCl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgPGZvcm1cbiAgICAgICAgICAgIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJwdC0yIG10LWF1dG8gcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuIHJvdW5kZWQtbGcgYm9yZGVyIGZvY3VzLXdpdGhpbjpyaW5nLTEgZm9jdXMtd2l0aGluOnJpbmctcmluZ1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJtZXNzYWdlXCIgY2xhc3NOYW1lPVwic3Itb25seVwiPlxuICAgICAgICAgICAgICBNZXNzYWdlXG4gICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBwdC0wIHB4LTIgcHktMlwiPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIGlkPVwibWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgbmFtZT1cIm1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSB5b3VyIG1lc3NhZ2UgaGVyZS4uLlwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9jdXMtdmlzaWJsZTpib3JkZXItMCBmb2N1cy12aXNpYmxlOm91dGxpbmUtMCByZXNpemUtbm9uZSBib3JkZXItMCBzaGFkb3ctbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMCBmbGV4LWdyb3dcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtbC0yIGdhcC0xLjUgbWluLXctMTAgaC0xMFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyA8TG9hZGVyMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBhbmltYXRlLXNwaW5cIiAvPiA6IDxTZW5kIC8+fVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzbWFsbCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ncmF5LTQwMCc+TWVzc2FnZXMgYXJlIGdlbmVyYXRlZCBieSBBSSBhbmQgbWF5IGJlIGluYWNjdXJhdGUgb3IgaW5hcHByb3ByaWF0ZTwvc21hbGw+XG4gICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgPC9EaWFsb2c+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGF0RGlhbG9nO1xuXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIkRpYWxvZyIsIkRpYWxvZ0NvbnRlbnQiLCJEaWFsb2dIZWFkZXIiLCJEaWFsb2dUaXRsZSIsIkRpYWxvZ0Nsb3NlIiwiQnV0dG9uIiwiTG9hZGVyMiIsIlNlbmQiLCJJbnB1dCIsIkxhYmVsIiwiQ2FyZCIsIlR5cGVJdCIsImdldEFpUmVzcG9uc2UiLCJteVRleHQiLCJyZXNwIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9tcHQiLCJkYXRhIiwianNvbiIsIkFubnVhckFpIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZvcm1hdFJlc3BvbnNlIiwicmVzcG9uc2UiLCJmb3JtYXR0ZWQiLCJyZXBsYWNlIiwiXyIsInAxIiwidG9VcHBlckNhc2UiLCJmb3JtYXRUaW1lQWdvIiwidGltZXN0YW1wIiwibm93IiwiRGF0ZSIsImVsYXBzZWRTZWNvbmRzIiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsImVsYXBzZWRNaW51dGVzIiwiZWxhcHNlZEhvdXJzIiwiZWxhcHNlZERheXMiLCJDaGF0RGlhbG9nIiwiaXNPcGVuIiwib25DbG9zZSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJtZXNzYWdlc0VuZFJlZiIsInNjcm9sbFRvQm90dG9tIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVTdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsIm1lc3NhZ2VJbnB1dCIsImVsZW1lbnRzIiwibmFtZWRJdGVtIiwidmFsdWUiLCJ0cmltIiwicHJldk1lc3NhZ2VzIiwidGV4dCIsInR5cGUiLCJhaVJlc3BvbnNlIiwiZm9ybWF0dGVkUmVzcG9uc2UiLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwiY2xhc3NOYW1lIiwiZGl2IiwibGVuZ3RoIiwic3BhbiIsIm1hcCIsIm1lc3NhZ2UiLCJpbmRleCIsIm9wdGlvbnMiLCJzcGVlZCIsIndhaXRVbnRpbFZpc2libGUiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsIl9faHRtbCIsInJlZiIsIm9uU3VibWl0IiwiaHRtbEZvciIsInJlcXVpcmVkIiwiaWQiLCJuYW1lIiwicGxhY2Vob2xkZXIiLCJzaXplIiwiZGlzYWJsZWQiLCJzbWFsbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/ChatBot.tsx\n"));

/***/ })

});